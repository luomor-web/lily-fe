(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de2d7"],{8515:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e._self._c;return a("WaterMark",[a("Header",{attrs:{back:""}}),e.postInfo.wechat_payment?a("Card",{attrs:{"dis-hover":"",bordered:!1}},[a("Alert",{attrs:{"show-icon":"",type:"info"}},[e._v(" 物业费用计算时，小于一分的将被忽略计算，请知晓。 ")]),a("Form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-position":e.mlabelPostion,"label-width":e.mlabelWidth},nativeOn:{submit:function(e){e.preventDefault()}}},[a("FormField",{attrs:{prop:"community_id",title:"收费小区："}},[e._v(" "+e._s(e.community_name)+" ")]),a("FormField",{attrs:{prop:"start_year",title:"物业费起始年份："}},[a("DatePicker",{attrs:{type:"year",options:{disabledDate:this.startYearDisabledDate},placeholder:"请选择物业费起始年份"},model:{value:e.form.start_year,callback:function(a){e.$set(e.form,"start_year",a)},expression:"form.start_year"}})],1),a("FormField",{attrs:{prop:"end_year",title:"物业费结束年份："}},[a("DatePicker",{attrs:{type:"year",options:{disabledDate:this.endYearDisabledDate},placeholder:"请选择物业费结束年份"},model:{value:e.form.end_year,callback:function(a){e.$set(e.form,"end_year",a)},expression:"form.end_year"}})],1),a("FormField",{attrs:{prop:"computed_house_fee_by_area",title:"住宅物业费计算方式："}},[a("RadioGroup",{model:{value:e.form.computed_house_fee_by_area,callback:function(a){e.$set(e.form,"computed_house_fee_by_area",a)},expression:"form.computed_house_fee_by_area"}},[a("Radio",{attrs:{label:0}},[e._v("单位建筑")]),a("Radio",{attrs:{label:1}},[e._v("建筑面积")])],1)],1),a("FormField",{attrs:{prop:"house_fee",title:"住宅物业费：",unit:"分",width:"240",label:e.house_fee_msg}},[a("Input",{attrs:{placeholder:"请输入住宅物业费",type:"number"},model:{value:e.form.house_fee,callback:function(a){e.$set(e.form,"house_fee",a)},expression:"form.house_fee"}})],1),a("FormField",{attrs:{prop:"computed_carport_fee_by_area",title:"车位物业费计算方式："}},[a("RadioGroup",{model:{value:e.form.computed_carport_fee_by_area,callback:function(a){e.$set(e.form,"computed_carport_fee_by_area",a)},expression:"form.computed_carport_fee_by_area"}},[a("Radio",{attrs:{label:0}},[e._v("单位建筑")]),a("Radio",{attrs:{label:1}},[e._v("建筑面积")])],1)],1),a("FormField",{attrs:{prop:"carport_fee",title:"车位物业费：",unit:"分",width:"240",label:e.carport_fee_msg}},[a("Input",{attrs:{placeholder:"请输入车位物业费",type:"number"},model:{value:e.form.carport_fee,callback:function(a){e.$set(e.form,"carport_fee",a)},expression:"form.carport_fee"}})],1),a("FormField",{attrs:{prop:"computed_warehouse_fee_by_area",title:"仓房物业费计算方式："}},[a("RadioGroup",{model:{value:e.form.computed_warehouse_fee_by_area,callback:function(a){e.$set(e.form,"computed_warehouse_fee_by_area",a)},expression:"form.computed_warehouse_fee_by_area"}},[a("Radio",{attrs:{label:0}},[e._v("单位建筑")]),a("Radio",{attrs:{label:1}},[e._v("建筑面积")])],1)],1),a("FormField",{attrs:{prop:"warehoure_fee",title:"仓房物业费：",unit:"分",width:"240",label:e.warehoure_fee_msg}},[a("Input",{attrs:{placeholder:"请输入仓房物业费",type:"number"},model:{value:e.form.warehoure_fee,callback:function(a){e.$set(e.form,"warehoure_fee",a)},expression:"form.warehoure_fee"}})],1),a("FormField",{attrs:{prop:"computed_merchant_fee_by_area",title:"商户物业费计算方式："}},[a("RadioGroup",{model:{value:e.form.computed_merchant_fee_by_area,callback:function(a){e.$set(e.form,"computed_merchant_fee_by_area",a)},expression:"form.computed_merchant_fee_by_area"}},[a("Radio",{attrs:{label:0}},[e._v("单位建筑")]),a("Radio",{attrs:{label:1}},[e._v("建筑面积")])],1)],1),a("FormField",{attrs:{prop:"merchant_fee",title:"商户物业费：",unit:"分",width:"240",label:e.merchant_fee_msg}},[a("Input",{attrs:{placeholder:"请输入商户物业费",type:"number"},model:{value:e.form.merchant_fee,callback:function(a){e.$set(e.form,"merchant_fee",a)},expression:"form.merchant_fee"}})],1),a("FormField",{attrs:{prop:"computed_garage_fee_by_area",title:"车库物业费计算方式："}},[a("RadioGroup",{model:{value:e.form.computed_garage_fee_by_area,callback:function(a){e.$set(e.form,"computed_garage_fee_by_area",a)},expression:"form.computed_garage_fee_by_area"}},[a("Radio",{attrs:{label:0}},[e._v("单位建筑")]),a("Radio",{attrs:{label:1}},[e._v("建筑面积")])],1)],1),a("FormField",{attrs:{prop:"garage_fee",title:"车库物业费：",unit:"分",width:"240",label:e.garage_fee_msg}},[a("Input",{attrs:{placeholder:"请输入车库物业费",type:"number"},model:{value:e.form.garage_fee,callback:function(a){e.$set(e.form,"garage_fee",a)},expression:"form.garage_fee"}})],1),a("FormField",{attrs:{prop:"wechat_push",title:"微信公众号推送收费通知："}},[a("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:e.form.wechat_push,callback:function(a){e.$set(e.form,"wechat_push",a)},expression:"form.wechat_push"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("否")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("是")])])],1),a("FormField",{attrs:{prop:"sms_push",title:"短信推送收费通知："}},[a("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:e.form.sms_push,callback:function(a){e.$set(e.form,"sms_push",a)},expression:"form.sms_push"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("否")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("是")])])],1),a("div",{staticClass:"cw-form-actions"},[a("Button",{attrs:{type:"primary",loading:e.submiting},on:{click:e.submit}},[e._v(" 发起收费 ")])],1)],1)],1):a("Result",{attrs:{type:"error",title:"当前物业公司不支持微信支付物业费用"}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("p",[e._v(" 如需开通，请联系云启智城工作人员或发送邮件至发信至 "),a("a",{attrs:{href:"mailto:contact@luomor.com"}},[e._v("技术支持")]),e._v(" 。 ")])])])],1)},o=[],s=t("37a2"),_=t("4c91"),m=t("6339"),u=t("545e"),i=t("2cce"),l=t("8100"),f=t("e7c9"),n=t("88bd"),c=t("3e79"),p=t("8c99"),d=(t("00e5"),t("ed70"),t("7736")),h=t("2af9"),b=t("ed08"),y=t("e49c"),g=t("2f42"),v=t.n(g),w={name:"OaFinanceCreate",data(){return{labelWidth:240,form:{start_year:"",end_year:"",house_fee:"",computed_house_fee_by_area:1,carport_fee:"",computed_carport_fee_by_area:0,warehoure_fee:"",computed_warehouse_fee_by_area:0,merchant_fee:"",computed_merchant_fee_by_area:1,garage_fee:"",computed_garage_fee_by_area:0,wechat_push:0,sms_push:0},rules:{start_year:[{required:!0,type:"date",message:"请选择物业费起始年份"}],end_year:[{required:!0,type:"date",message:"请选择物业费结束年份"},{validator:(e,a,t)=>{const r=!this.form.start_year||+this.form.start_year<+a;r?t():t(new Error("结束年份应大于开始年份"))},message:"结束年份应大于开始年份"}],house_fee:[{required:!0,message:"请输入住宅物业费"},{max:9,message:"住宅物业费不能高于1000000元"},{pattern:/^\d+$/,message:"请输入正确的金额，不能包含小数"}],computed_house_fee_by_area:[{required:!0,type:"number",message:"请选择住宅物业费计算方式"}],carport_fee:[{required:!0,message:"请输入车位物业费"},{max:9,message:"车位物业费不能高于1000000元"},{pattern:/^\d+$/,message:"请输入正确的金额，不能包含小数"}],computed_carport_fee_by_area:[{required:!0,type:"number",message:"请选择车位物业费计算方式"}],warehoure_fee:[{required:!0,message:"请输入仓房物业费"},{max:9,message:"仓房物业费不能高于1000000元"},{pattern:/^\d+$/,message:"请输入正确的金额，不能包含小数"}],computed_warehouse_fee_by_area:[{required:!0,type:"number",message:"请选择仓房物业费计算方式"}],merchant_fee:[{required:!0,message:"请输入商户物业费"},{max:9,message:"商户物业费不能高于1000000元"},{pattern:/^\d+$/,message:"请输入正确的金额，不能包含小数"}],computed_merchant_fee_by_area:[{required:!0,type:"number",message:"请选择商户物业费计算方式"}],garage_fee:[{required:!0,message:"请输入车库物业费"},{max:9,message:"车库物业费不能高于1000000元"},{pattern:/^\d+$/,message:"请输入正确的金额，不能包含小数"}],computed_garage_fee_by_area:[{required:!0,type:"number",message:"请选择车库物业费计算方式"}],wechat_push:[{required:!0,type:"number",message:"请选择是否通过微信公众号推送收费通知"}],sms_push:[{required:!0,type:"number",message:"请选择是否通过短信推送收费通知"}]},submiting:!1}},mixins:[y["a"]],methods:{startYearDisabledDate(e){return+e<v()().subtract(1,"year").valueOf()},endYearDisabledDate(e){return+e<v()().valueOf()},submit(){this.$refs.form.validate(e=>{if(!e)return;this.submiting=!0;const a={...this.form,community_id:this.postInfo.default_community_id};a.start_year=v()(a.start_year).format("YYYY"),a.end_year=v()(a.end_year).format("YYYY"),b["i"]({url:"/payment/create",data:a,method:"post"}).then(e=>{this.submiting=!1,this.$router.push("/oa/finance/unpay/"+e.data.id),p["a"].success("创建物业收费成功")}).catch(()=>this.submiting=!1)})}},computed:{...Object(d["c"])({postInfo:"common/postInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const e=this.postInfo.community_list.findIndex(e=>e.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[e].name},house_fee_msg(){return this.form.house_fee?`住宅按照${this.form.computed_house_fee_by_area?"每平方米":"单位建筑"}收取${b["h"].yuan(this.form.house_fee)}元`:""},carport_fee_msg(){return this.form.carport_fee?`车位按照${this.form.computed_carport_fee_by_area?"每平方米":"单位建筑"}收取${b["h"].yuan(this.form.carport_fee)}元`:""},warehoure_fee_msg(){return this.form.warehoure_fee?`仓房按照${this.form.computed_warehouse_fee_by_area?"每平方米":"单位建筑"}收取${b["h"].yuan(this.form.warehoure_fee)}元`:""},merchant_fee_msg(){return this.form.merchant_fee?`商户按照${this.form.computed_merchant_fee_by_area?"每平方米":"单位建筑"}收取${b["h"].yuan(this.form.merchant_fee)}元`:""},garage_fee_msg(){return this.form.garage_fee?`车库按照${this.form.computed_garage_fee_by_area?"每平方米":"单位建筑"}收取${b["h"].yuan(this.form.garage_fee)}元`:""}},components:{Header:h["k"],Card:c["a"],Button:n["a"],Input:f["a"],Radio:l["a"],RadioGroup:i["a"],FormField:h["j"],Form:u["a"],DatePicker:m["a"],Result:h["q"],Alert:_["a"],WaterMark:h["s"],OSwitch:s["a"]}},F=w,$=t("e607"),k=Object($["a"])(F,r,o,!1,null,null,null);a["default"]=k.exports}}]);