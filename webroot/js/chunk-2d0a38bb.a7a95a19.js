(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a38bb"],{"0346":function(t,o,i){"use strict";i.r(o);var e=function(){var t=this,o=t._self._c;return o("section",[o("Header",[o("span",{attrs:{slot:"description"},slot:"description"},[t._v(" 小区独立设置，当前小区是"+t._s(t.community_name)+"，切换小区请点击右上角，请谨慎操作，如有疑问请发信至 "),o("a",{attrs:{href:"mailto:contact@luomor.com"}},[t._v("技术支持")]),t._v(" 咨询。 ")])]),o("section",[o("RadioGroup",{attrs:{type:"button"},model:{value:t.activeType,callback:function(o){t.activeType=o},expression:"activeType"}},[o("Radio",{attrs:{label:1}},[t._v("请假流程")]),o("Radio",{attrs:{label:2}},[t._v("报销流程")]),o("Radio",{attrs:{label:3}},[t._v("采购流程")])],1),o("Workflow",{attrs:{options:t.options,flow:t.flow,onSubmit:t.submit}})],1),t.fetching?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},n=[],s=i("8100"),a=i("2cce"),c=i("4d77"),l=i("8c99"),p=i("7736"),d=i("2af9"),u=i("ed08"),m={name:"SettingWorkflow",data(){return{activeType:1,fetching:!0,flow:{},options:{list:[],conditions:[{label:"隶属部门",category:1},{label:"请假天数",category:2}]}}},mounted(){this.postInfo.default_community_id&&this.getOptions()},methods:{getOptions(){u["i"].post("/option/colleague",{community_id:this.postInfo.default_community_id}).then(t=>{this.options.list=t.data.list,this.getDetail()}).catch(()=>this.fetching=!1)},getDetail(){const t={community_id:this.postInfo.default_community_id,type:this.activeType};this.fetching=!1,u["i"].post("/workflow/detail",t).then(t=>{this.flow=t.data.node,this.fetching=!1}).catch(()=>this.fetching=!1)},submit(t){return new Promise(o=>{const i={community_id:this.postInfo.default_community_id,type:this.activeType,node:t};u["i"].post("/workflow/create",i).then(t=>{l["a"].success("流程保存成功"),o(t)}).catch(()=>o())})}},computed:{...Object(p["c"])({postInfo:"common/postInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},watch:{"postInfo.default_community_id"(){this.getOptions()},activeType(t){switch(this.getDetail(),t){case 1:this.options.conditions[1].label="请假天数";break;case 2:this.options.conditions[1].label="报销金额";break;case 3:this.options.conditions[1].label="采购金额";break}}},components:{Header:d["k"],Spin:c["a"],Workflow:d["t"],RadioGroup:a["a"],Radio:s["a"]}},r=m,f=i("e607"),h=Object(f["a"])(r,e,n,!1,null,null,null);o["default"]=h.exports}}]);