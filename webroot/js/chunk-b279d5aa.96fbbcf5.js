(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b279d5aa"],{"0fc7":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{class:t.wrapClasses},[e("div",{class:[t.prefixCls+"-tail"]},[e("i")]),e("div",{class:[t.prefixCls+"-head"]},[e("div",{class:[t.prefixCls+"-head-inner"]},[t.icon||t.$slots.icon||"finish"===t.currentStatus||"error"===t.currentStatus?t.$slots.icon?e("span",{staticClass:"ivu-steps-icon"},[t._t("icon")],2):e("span",{class:t.iconClasses}):e("span",[t._v(t._s(t.stepNumber))])])]),e("div",{class:[t.prefixCls+"-main"]},[e("div",{class:[t.prefixCls+"-title"]},[t._t("title",(function(){return[t._v(t._s(t.title))]}))],2),t.content||t.$slots.content?e("div",{class:[t.prefixCls+"-content"]},[t._t("content",(function(){return[t._v(t._s(t.content))]}))],2):t._e()])])},i=[],a=r("ce17"),n=r("e4a4");const o="ivu-steps",c="ivu-icon";var l={name:"Step",mixins:[a["a"]],props:{status:{validator(t){return Object(n["m"])(t,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:o,stepNumber:"",nextError:!1,total:1,currentStatus:""}},computed:{wrapClasses(){return[o+"-item",`${o}-status-${this.currentStatus}`,{[o+"-custom"]:!!this.icon||!!this.$slots.icon,[o+"-next-error"]:this.nextError}]},iconClasses(){let t="";return this.icon?t=this.icon:"finish"===this.currentStatus?t="ios-checkmark":"error"===this.currentStatus&&(t="ios-close"),[o+"-icon",""+c,{[`${c}-${t}`]:""!==t}]}},watch:{status(t){this.currentStatus=t,"error"===this.currentStatus&&this.$parent.setNextError()}},created(){this.currentStatus=this.status},mounted(){this.dispatch("Steps","append")},beforeDestroy(){this.dispatch("Steps","remove")}},u=l,p=r("e607"),d=Object(p["a"])(u,s,i,!1,null,null,null);e["a"]=d.exports},"101d":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{class:t.classes},[t._t("default")],2)},i=[],a=r("e4a4");const n="ivu-steps";function o(t){let e;return function(){if(e)return;e=!0;const r=this,s=arguments,i=function(){e=!1,t.apply(r,s)};this.$nextTick(i)}}var c={name:"Steps",props:{current:{type:Number,default:0},status:{validator(t){return Object(a["m"])(t,["wait","process","finish","error"])},default:"process"},size:{validator(t){return Object(a["m"])(t,["small"])}},direction:{validator(t){return Object(a["m"])(t,["horizontal","vertical"])},default:"horizontal"}},computed:{classes(){return[""+n,`${n}-${this.direction}`,{[`${n}-${this.size}`]:!!this.size}]}},methods:{updateChildProps(t){const e=this.$children.length;this.$children.forEach((r,s)=>{r.stepNumber=s+1,"horizontal"===this.direction&&(r.total=e),t&&r.currentStatus||(s===this.current?"error"!==this.status&&(r.currentStatus="process"):s<this.current?r.currentStatus="finish":r.currentStatus="wait"),"error"!==r.currentStatus&&0!==s&&(this.$children[s-1].nextError=!1)})},setNextError(){this.$children.forEach((t,e)=>{"error"===t.currentStatus&&0!==e&&(this.$children[e-1].nextError=!0)})},updateCurrent(t){if(!(this.current<0||this.current>=this.$children.length))if(t){const t=this.$children[this.current].currentStatus;t||(this.$children[this.current].currentStatus=this.status)}else this.$children[this.current].currentStatus=this.status},debouncedAppendRemove(){return o((function(){this.updateSteps()}))},updateSteps(){this.updateChildProps(!0),this.setNextError(),this.updateCurrent(!0)}},mounted(){this.updateSteps(),this.$on("append",this.debouncedAppendRemove()),this.$on("remove",this.debouncedAppendRemove())},watch:{current(){this.updateChildProps()},status(){this.updateCurrent()}}},l=c,u=r("e607"),p=Object(u["a"])(l,s,i,!1,null,null,null),d=p.exports,h=r("0fc7");d.Step=h["a"];e["a"]=d},"8ae2":function(t,e,r){"use strict";var s=r("0fc7");e["a"]=s["a"]},c96d:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Steps",{attrs:{current:t.step}},[e("Step",{attrs:{title:"投诉来源",content:"来自业主或公司派遣"}}),e("Step",{attrs:{title:"投诉信息",content:"录入投诉详细信息"}}),e("Step",{attrs:{title:"创建成功",content:"工单创建成功"}})],1),0===t.step?e("div",{staticClass:"ivu-form"},[e("RadioGroup",{model:{value:t.refer,callback:function(e){t.refer=e},expression:"refer"}},[e("Radio",{attrs:{label:"owner"}},[t._v("业主报修")]),e("Radio",{attrs:{label:"colleague"}},[t._v("公司派遣")])],1),"owner"===t.refer?e("FindOwer",{staticClass:"mt-16",on:{"on-find-owner":t.onFindOwer}}):e("div",{staticClass:"cw-form-actions"},[e("Button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1):t._e(),1===t.step?e("Form",{ref:"form",attrs:{model:t.form,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},["owner"===t.refer?e("FormField",{attrs:{title:"业主姓名："}},[t._v(" "+t._s(t.ownerInfo.real_name)+" ")]):t._e(),e("FormField",{attrs:{title:"反馈类型：",prop:"type"}},[e("Select",{attrs:{placeholder:"请选择反馈类型",filterable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[e("Option",{attrs:{value:1}},[t._v("投诉")]),e("Option",{attrs:{value:1}},[t._v("建议")])],1)],1),e("FormField",{attrs:{title:"反馈分类：",prop:"category"}},[e("Select",{attrs:{placeholder:"请选择反馈分类"},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},[e("Option",{attrs:{value:1}},[t._v("卫生")]),e("Option",{attrs:{value:2}},[t._v("噪音")]),e("Option",{attrs:{value:3}},[t._v("服务态度")]),e("Option",{attrs:{value:4}},[t._v("违建")]),e("Option",{attrs:{value:5}},[t._v("占用消防通道")]),e("Option",{attrs:{value:6}},[t._v("小区设施")]),e("Option",{attrs:{value:7}},[t._v("其他")])],1)],1),e("FormField",{attrs:{title:"问题描述：",prop:"description"}},[e("Input",{attrs:{type:"textarea",rows:5,"show-word-limit":"",maxlength:"200",placeholder:"请输入问题描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("FormField",{attrs:{title:"现场图片：",prop:"complain_imgs"}},[e("MultipleImageUpload",{attrs:{dir:"repair"},model:{value:t.form.complain_imgs,callback:function(e){t.$set(t.form,"complain_imgs",e)},expression:"form.complain_imgs"}})],1),e("div",{staticClass:"cw-form-actions"},[e("Button",{on:{click:t.preStep}},[t._v("上一步")]),e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("下一步")])],1)],1):t._e(),2===t.step?e("Result",{attrs:{title:"工单创建成功"}},[e("div",{attrs:{slot:"extra"},slot:"extra"},[e("p",[t._v("请及时指派人员反馈。")]),"owner"===t.refer?e("p",[t._v("请注意保护业主隐私。")]):t._e()]),e("div",{attrs:{slot:"actions"},slot:"actions"},[e("Button",{attrs:{type:"primary"},on:{click:t.goDetail}},[t._v("查看工单信息")])],1)]):t._e()],1)],1)},i=[],a=r("545e"),n=r("13ab"),o=r("fee1"),c=r("8ae2"),l=r("101d"),u=r("2cce"),p=r("8100"),d=r("e7c9"),h=r("88bd"),m=r("3e79"),f=(r("ed70"),r("7736")),v=r("2af9"),_=r("ed08"),b=r("e49c"),S={name:"BasicRepairCreate",data(){return{step:0,refer:"owner",ownerInfo:{},form:{type:"",category:"",description:"",complain_imgs:[]},rules:{type:[{required:!0,message:"请选择反馈类型"}],category:[{required:!0,message:"请选择反馈分类"}],description:[{required:!0,message:"请输入问题描述"},{max:200,message:"问题描述最多输入200个字"},{min:5,message:"问题描述最少输入5个字"}]},insertId:null,submiting:!1}},mixins:[b["a"]],methods:{building(t){return _["b"].text(t)},preStep(){this.step--},onFindOwer(t){this.ownerInfo=t,this.step++},nextStep(){this.step++},submit(){this.$refs.form.validate(t=>{if(!t)return;const e={...this.form,community_id:this.postInfo.default_community_id};"owner"===this.refer&&(e["wechat_mp_user_id"]=this.ownerInfo.id),this.submiting=!0,_["i"]({url:"/complain/create",data:e,method:"post"}).then(t=>{this.submiting=!1,this.insertId=t.data.id,this.step++}).catch(()=>this.submiting=!1)})},goDetail(){this.$router.push("/basic/complain/detail/"+this.insertId)}},computed:{...Object(f["c"])({postInfo:"common/postInfo"})},components:{FindOwer:v["i"],Header:v["k"],Card:m["a"],Button:h["a"],Input:d["a"],Result:v["q"],Radio:p["a"],RadioGroup:u["a"],Steps:l["a"],Step:c["a"],Select:o["a"],Option:n["a"],FormField:v["j"],Form:a["a"],MultipleImageUpload:v["p"],WaterMark:v["s"]}},w=S,g=r("e607"),x=Object(g["a"])(w,s,i,!1,null,null,null);e["default"]=x.exports}}]);