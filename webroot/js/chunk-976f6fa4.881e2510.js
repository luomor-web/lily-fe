(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-976f6fa4"],{5932:function(t,s,e){"use strict";e.r(s);var r=function(){var t=this,s=t._self._c;return s("section",{staticClass:"wechat-verify"},[s("div",{staticClass:"wechat-verify-body"},[s("div",{staticClass:"hands"},[t._m(0),s("b",[t._v("&")]),s("span",{staticClass:"logo wechat"},[s("Icon",{attrs:{type:"wechat"}})],1)]),t.error?t._e():s("p",{staticClass:"loading"},[t._v(" 微信授权认证中 "),s("span",{staticClass:"dot"})]),t.error?s("div",[s("Alert",{attrs:{type:"error","show-icon":""}},[t._v(" 授权失败 "),s("span",{attrs:{slot:"desc"},slot:"desc"},[t._v(" "+t._s(t.msg)+" ")])]),s("div",{staticClass:"txt-center"},[s("router-link",{attrs:{to:"/user/login"}},[t._v("返回登陆页")])],1)],1):t._e()]),s("Copyright",{staticClass:"copyright"})],1)},a=[function(){var t=this,s=t._self._c;return s("span",{staticClass:"logo"},[s("img",{attrs:{src:e("9b19"),alt:"logo"}})])}],o=e("4c91"),i=e("4b1c"),n=e("7736"),c=e("ed08"),l=e("2af9"),u={name:"UserLoginWechat",data(){return{error:!1,msg:null}},components:{Icon:i["a"],Alert:o["a"],Copyright:l["d"]},methods:{...Object(n["b"])({updateUserInfo:"common/updateUserInfo"})},mounted(){const{code:t,state:s}=this.$route.query;if(!t||!s)return this.$router.replace("/user/login");c["i"].post("/user/wechat_login",{code:t,state:s}).then(t=>{c["a"].login(t.data.userInfo.id,t.data.token),this.updateUserInfo(t.data),this.$router.replace(this.$route.query.redirect?this.$route.query.redirect:"/")}).catch(t=>{this.error=!0,this.msg=t.message})}},d=u,h=(e("a302"),e("e607")),p=Object(h["a"])(d,r,a,!1,null,null,null);s["default"]=p.exports},a302:function(t,s,e){"use strict";e("d0e5")},d0e5:function(t,s,e){}}]);