(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10a5d8ea"],{"0120":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header"),e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Steps",{attrs:{current:t.step}},[e("Step",{attrs:{title:"业主信息",content:"根据手机号确认业主信息"}}),e("Step",{attrs:{title:"健康信息",content:"登记体温、健康码状态"}}),e("Step",{attrs:{title:"登记成功",content:"疫情防控信息登记成功"}})],1),0===t.step?e("FindOwer",{on:{"on-find-owner":t.onFindOwer}}):t._e(),1===t.step?e("Form",{ref:"form",attrs:{model:t.form,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormField",{attrs:{title:"业主姓名："}},[t._v(" "+t._s(t.ownerInfo.real_name)+" ")]),e("FormField",{attrs:{title:"小区名称："}},[t._v(" "+t._s(t.community_name)+" ")]),e("FormField",{attrs:{title:"出入住所：",prop:"building_id"}},[e("Select",{attrs:{placeholder:"请选择出入住所",filterable:""},model:{value:t.form.building_id,callback:function(e){t.$set(t.form,"building_id",e)},expression:"form.building_id"}},t._l([].concat(t.ownerInfo.houses,t.ownerInfo.merchants,t.ownerInfo.carports,t.ownerInfo.garages,t.ownerInfo.warehouses),(function(r){return e("Option",{key:r.building_id,attrs:{value:r.building_id}},[t._v(" "+t._s(t.building(r))+" ")])})),1)],1),e("FormField",{attrs:{title:"健康码状态：",prop:"tour_code"}},[e("RadioGroup",{model:{value:t.form.tour_code,callback:function(e){t.$set(t.form,"tour_code",e)},expression:"form.tour_code"}},[e("Radio",{attrs:{label:1}},[e("Tag",{attrs:{color:"success"}},[t._v("绿码")])],1),e("Radio",{attrs:{label:2}},[e("Tag",{attrs:{color:"warning"}},[t._v("黄码")])],1),e("Radio",{attrs:{label:3}},[e("Tag",{attrs:{color:"error"}},[t._v("红码")])],1)],1)],1),e("FormField",{attrs:{title:"体温",prop:"temperature",width:"180",unit:"℃"}},[e("Input",{attrs:{type:"number",placeholder:"请输入体温"},model:{value:t.form.temperature,callback:function(e){t.$set(t.form,"temperature",e)},expression:"form.temperature"}})],1),e("FormField",{attrs:{title:"外地返回：",prop:"return_hometown"}},[e("RadioGroup",{model:{value:t.form.return_hometown,callback:function(e){t.$set(t.form,"return_hometown",e)},expression:"form.return_hometown"}},[e("Radio",{attrs:{label:1}},[e("Tag",{attrs:{color:"default"}},[t._v("是")])],1),e("Radio",{attrs:{label:0}},[e("Tag",{attrs:{color:"orange"}},[t._v("否")])],1)],1)],1),t.form.return_hometown?e("FormField",{attrs:{title:"返回地：",prop:"address"}},[e("AreaSelect",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1):t._e(),e("div",{staticClass:"cw-form-actions"},[e("Button",{on:{click:t.preStep}},[t._v("上一步")]),e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("下一步")])],1)],1):t._e(),2===t.step?e("Result",{attrs:{title:"疫情防控信息登记成功"}},[e("div",{attrs:{slot:"extra"},slot:"extra"},[e("p",[t._v("行程码非绿码的情况，应立即通知社区和疫情防控指挥部！")])]),e("div",{attrs:{slot:"actions"},slot:"actions"},[e("Button",{attrs:{type:"default"},on:{click:t.reset}},[t._v("重新登记")]),e("Button",{attrs:{type:"primary"},on:{click:t.goDetail}},[t._v("查看防控信息")])],1)]):t._e()],1)],1)},o=[],i=r("c03a"),n=r("2cce"),a=r("8100"),l=r("545e"),c=r("13ab"),u=r("fee1"),d=r("8ae2"),h=r("101d"),p=r("e7c9"),m=r("88bd"),f=r("3e79"),b=(r("ed70"),r("7736")),_=r("2af9"),y=r("ed08"),v=r("e49c"),g={name:"BasicEpidemicCreate",data(){return{step:0,ownerInfo:{},form:{community_id:"",building_id:"",tour_code:1,temperature:"",return_hometown:0,address:[]},rules:{building_id:[{required:!0,type:"number",message:"请选择出入住所"}],tour_code:[{required:!0,type:"number",message:"请选择健康码颜色"}],temperature:[{required:!0,message:"请输入当前体温"}],return_hometown:[{required:!0,type:"number",message:"请选择是否外地返回"}],address:[{required:!0,type:"array",len:3,message:"请选择外地信息"}]},insertId:null,fetching:!1,submiting:!1}},mixins:[v["a"]],methods:{building(t){return y["b"].text(t,!1)},preStep(){this.step--},onFindOwer(t){this.ownerInfo=t,this.step++},submit(){this.$refs.form.validate(t=>{if(!t)return;const e={...this.form,wechat_mp_user_id:this.ownerInfo.id,community_id:this.postInfo.default_community_id,return_from_province:this.form.address[0],return_from_city:this.form.address[1],return_from_district:this.form.address[2]};delete e.address,this.submiting=!0,y["i"]({url:"/epidemic/create",data:e,method:"post"}).then(t=>{this.submiting=!1,this.insertId=t.data.id,this.step++}).catch(()=>this.submiting=!1)})},goDetail(){this.$router.push("/basic/epidemic/detail/"+this.insertId)},reset(){this.step=0,this.phone="",this.form={community_id:"",building_id:"",tour_code:1,temperature:"",return_hometown:0,address:[]}}},computed:{...Object(b["c"])({postInfo:"common/postInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},components:{FindOwer:_["i"],Header:_["k"],Card:f["a"],Button:m["a"],Input:p["a"],Result:_["q"],Steps:h["a"],Step:d["a"],Select:u["a"],Option:c["a"],FormField:_["j"],Form:l["a"],AreaSelect:_["a"],Radio:a["a"],RadioGroup:n["a"],Tag:i["a"],WaterMark:_["s"]}},C=g,S=r("e607"),w=Object(S["a"])(C,s,o,!1,null,null,null);e["default"]=w.exports},"0fc7":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{class:t.wrapClasses},[e("div",{class:[t.prefixCls+"-tail"]},[e("i")]),e("div",{class:[t.prefixCls+"-head"]},[e("div",{class:[t.prefixCls+"-head-inner"]},[t.icon||t.$slots.icon||"finish"===t.currentStatus||"error"===t.currentStatus?t.$slots.icon?e("span",{staticClass:"ivu-steps-icon"},[t._t("icon")],2):e("span",{class:t.iconClasses}):e("span",[t._v(t._s(t.stepNumber))])])]),e("div",{class:[t.prefixCls+"-main"]},[e("div",{class:[t.prefixCls+"-title"]},[t._t("title",(function(){return[t._v(t._s(t.title))]}))],2),t.content||t.$slots.content?e("div",{class:[t.prefixCls+"-content"]},[t._t("content",(function(){return[t._v(t._s(t.content))]}))],2):t._e()])])},o=[],i=r("ce17"),n=r("e4a4");const a="ivu-steps",l="ivu-icon";var c={name:"Step",mixins:[i["a"]],props:{status:{validator(t){return Object(n["m"])(t,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:a,stepNumber:"",nextError:!1,total:1,currentStatus:""}},computed:{wrapClasses(){return[a+"-item",`${a}-status-${this.currentStatus}`,{[a+"-custom"]:!!this.icon||!!this.$slots.icon,[a+"-next-error"]:this.nextError}]},iconClasses(){let t="";return this.icon?t=this.icon:"finish"===this.currentStatus?t="ios-checkmark":"error"===this.currentStatus&&(t="ios-close"),[a+"-icon",""+l,{[`${l}-${t}`]:""!==t}]}},watch:{status(t){this.currentStatus=t,"error"===this.currentStatus&&this.$parent.setNextError()}},created(){this.currentStatus=this.status},mounted(){this.dispatch("Steps","append")},beforeDestroy(){this.dispatch("Steps","remove")}},u=c,d=r("e607"),h=Object(d["a"])(u,s,o,!1,null,null,null);e["a"]=h.exports},"101d":function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{class:t.classes},[t._t("default")],2)},o=[],i=r("e4a4");const n="ivu-steps";function a(t){let e;return function(){if(e)return;e=!0;const r=this,s=arguments,o=function(){e=!1,t.apply(r,s)};this.$nextTick(o)}}var l={name:"Steps",props:{current:{type:Number,default:0},status:{validator(t){return Object(i["m"])(t,["wait","process","finish","error"])},default:"process"},size:{validator(t){return Object(i["m"])(t,["small"])}},direction:{validator(t){return Object(i["m"])(t,["horizontal","vertical"])},default:"horizontal"}},computed:{classes(){return[""+n,`${n}-${this.direction}`,{[`${n}-${this.size}`]:!!this.size}]}},methods:{updateChildProps(t){const e=this.$children.length;this.$children.forEach((r,s)=>{r.stepNumber=s+1,"horizontal"===this.direction&&(r.total=e),t&&r.currentStatus||(s===this.current?"error"!==this.status&&(r.currentStatus="process"):s<this.current?r.currentStatus="finish":r.currentStatus="wait"),"error"!==r.currentStatus&&0!==s&&(this.$children[s-1].nextError=!1)})},setNextError(){this.$children.forEach((t,e)=>{"error"===t.currentStatus&&0!==e&&(this.$children[e-1].nextError=!0)})},updateCurrent(t){if(!(this.current<0||this.current>=this.$children.length))if(t){const t=this.$children[this.current].currentStatus;t||(this.$children[this.current].currentStatus=this.status)}else this.$children[this.current].currentStatus=this.status},debouncedAppendRemove(){return a((function(){this.updateSteps()}))},updateSteps(){this.updateChildProps(!0),this.setNextError(),this.updateCurrent(!0)}},mounted(){this.updateSteps(),this.$on("append",this.debouncedAppendRemove()),this.$on("remove",this.debouncedAppendRemove())},watch:{current(){this.updateChildProps()},status(){this.updateCurrent()}}},c=l,u=r("e607"),d=Object(u["a"])(c,s,o,!1,null,null,null),h=d.exports,p=r("0fc7");h.Step=p["a"];e["a"]=h},"8ae2":function(t,e,r){"use strict";var s=r("0fc7");e["a"]=s["a"]},c03a:function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return t.fade?e("transition",{attrs:{name:"fade"}},[e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)]):e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)},o=[],i=r("4b1c"),n=r("e4a4");const a="ivu-tag",l=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],c=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"];var u={name:"Tag",components:{Icon:i["a"]},props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(t){return Object(n["m"])(t,["border","dot"])}},name:{type:[String,Number]},fade:{type:Boolean,default:!0},size:{validator(t){return Object(n["m"])(t,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[""+a,`${a}-size-${this.size}`,{[`${a}-${this.color}`]:!!this.color&&Object(n["m"])(this.color,l),[`${a}-${this.type}`]:!!this.type,[a+"-closable"]:this.closable,[a+"-checked"]:this.isChecked}]},wraperStyles(){return Object(n["m"])(this.color,l)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:"dot"!==this.type&&"border"!==this.type&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[a+"-text","border"===this.type&&Object(n["m"])(this.color,l)?`${a}-color-${this.color}`:"","dot"!==this.type&&"border"!==this.type&&"default"!==this.color&&this.isChecked&&c.indexOf(this.color)<0?a+"-color-white":""]},dotClasses(){return a+"-dot-inner"},iconClass(){return"dot"===this.type?"":"border"===this.type?Object(n["m"])(this.color,l)?`${a}-color-${this.color}`:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&"dot"===this.type},lineColor(){return"dot"===this.type?"":"border"===this.type?void 0!==this.color?Object(n["m"])(this.color,l)?"":this.color:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},borderColor(){return void 0!==this.color?"default"===this.color?"":this.color:""},dotColor(){return void 0!==this.color?Object(n["m"])(this.color,l)?"":this.color:""},textColorStyle(){return Object(n["m"])(this.color,l)?{}:"dot"!==this.type&&"border"!==this.type?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return Object(n["m"])(this.color,l)?{}:{background:this.dotColor}},defaultTypeColor(){return"dot"!==this.type&&"border"!==this.type&&void 0!==this.color?Object(n["m"])(this.color,l)?"":this.color:""}},methods:{close(t){void 0===this.name?this.$emit("on-close",t):this.$emit("on-close",t,this.name)},check(){if(!this.checkable)return;const t=!this.isChecked;this.isChecked=t,void 0===this.name?this.$emit("on-change",t):this.$emit("on-change",t,this.name)}},watch:{checked(t){this.isChecked=t}}},d=u,h=r("e607"),p=Object(h["a"])(d,s,o,!1,null,null,null),m=p.exports;e["a"]=m}}]);