(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3abc"],{"02bf":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormField",{attrs:{prop:"community_id",title:"所属小区："}},[t._v(" "+t._s(t.community_name)+" ")]),e("FormField",{attrs:{prop:"community_id",title:"请假人："}},[t._v(" "+t._s(t.userInfo.real_name)+" ")]),e("FormField",{attrs:{prop:"begin_date",title:"请假时间：",label:t.total}},[e("DatePicker",{staticStyle:{width:"100%"},attrs:{format:"yyyy年MM月dd日",options:{disabledDate:t=>+t<Date.now()-864e5},placeholder:"请选择请假时间"},model:{value:t.form.begin_date,callback:function(e){t.$set(t.form,"begin_date",e)},expression:"form.begin_date"}})],1),e("FormField",{attrs:{prop:"total",title:"请假天数：",label:t.total,width:"200",unit:"天"}},[e("Input",{attrs:{type:"number",placeholder:"请输入请假天数"},model:{value:t.form.total,callback:function(e){t.$set(t.form,"total",e)},expression:"form.total"}})],1),e("FormField",{attrs:{prop:"reason",title:"请假原因："}},[e("Input",{attrs:{type:"textarea",rows:3,"show-word-limit":"",maxlength:128,placeholder:"请输入请假原因"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1),e("div",{staticClass:"cw-form-actions"},[e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v(" 提交申请 ")])],1)],1)],1)],1)},r=[],i=a("6339"),s=a("545e"),n=a("e7c9"),m=a("88bd"),l=a("3e79"),d=a("8c99"),u=(a("ed70"),a("7736")),c=a("2af9"),f=a("ed08"),p=a("e49c"),b=a("2f42"),h=a.n(b),_={name:"OaLeaveApply",data(){return{labelWidth:240,form:{begin_date:"",total:"",reason:""},rules:{begin_date:[{required:!0,type:"date",message:"请选择请假时间"}],total:[{required:!0,message:"请输入请假天数"},{pattern:/^\d(\.\d+)?$/,message:"请输入正确的请假天数"}],reason:[{required:!0,message:"请输入请假原因"},{max:128,message:"请假原因不得超过128个字"}]},submiting:!1}},mixins:[p["a"]],methods:{submit(){this.$refs.form.validate(t=>{if(!t)return;this.submiting=!0;const e={...this.form,community_id:this.postInfo.default_community_id};e.begin_date=+e.begin_date,f["i"]({url:"/leave/create",data:e,method:"post"}).then(t=>{this.submiting=!1,this.$router.push("/oa/leave/detail/"+t.data.id),d["a"].success("请假申请成功")}).catch(()=>this.submiting=!1)})}},computed:{...Object(u["c"])({postInfo:"common/postInfo",userInfo:"common/userInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name},total(){if(!this.form.range||!this.form.range[0])return"";const t=h()(this.form.range[1]).diff(h()(this.form.range[0]),"day")+1;return`共计${t}天`}},components:{Header:c["k"],Card:l["a"],Button:m["a"],Input:n["a"],FormField:c["j"],Form:s["a"],DatePicker:i["a"],WaterMark:c["s"]}},g=_,y=a("e607"),v=Object(y["a"])(g,o,r,!1,null,null,null);e["default"]=v.exports}}]);