(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edea4744"],{"05b3":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormField",{attrs:{prop:"title",title:"专题标题："}},[e("Input",{attrs:{placeholder:"请输入专题标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("FormField",{attrs:{prop:"banner_img",title:"专题封面：",label:"请上传900*300尺寸图片"}},[e("ImageUpload",{attrs:{dir:"topic",width:900,height:300},model:{value:t.form.banner_img,callback:function(e){t.$set(t.form,"banner_img",e)},expression:"form.banner_img"}})],1),e("FormField",{attrs:{prop:"published",title:"发布到线上："}},[e("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.published,callback:function(e){t.$set(t.form,"published",e)},expression:"form.published"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])])],1),e("FormField",{attrs:{prop:"content",title:"专题内容："}},[e("Editor",{attrs:{dir:"topic"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),e("div",{staticClass:"cw-form-actions"},[e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v(" "+t._s(t.update?"更新":"发布")+" ")])],1)],1)],1)},a=[],o=i("88bd"),n=i("37a2"),r=i("e7c9"),l=i("545e"),m=i("3e79"),d=i("2af9"),u=i("e49c"),c={name:"TopicEditor",props:{update:Boolean,onSubmit:Function,detail:{type:Object,default:()=>({})}},data(){return{labelWidth:160,form:{title:this.detail.title?this.detail.title:"",banner_img:this.detail.banner_img?this.detail.banner_img:void 0,published:this.detail.published?this.detail.published:1,content:this.detail.content?this.detail.content:[]},rules:{title:[{required:!0,message:"请输入专题标题"},{max:56,message:"专题标题不能超过56个字"}],banner_img:[{required:!0,message:"请上传专题封面"}],published:[{required:!0,message:"请选择是否发布",type:"number"}],content:[{required:!0,message:"请输入专题内容",type:"array"}]},submiting:!1}},mixins:[u["a"]],methods:{submit(){this.$refs.form.validate(t=>{t&&(this.submiting=!0,this.onSubmit(this.form).then(()=>{this.submiting=!1},()=>{this.submiting=!1}))})}},watch:{detail:{deep:!0,handler(t){this.form={title:t.title?t.title:"",banner_img:t.banner_img?t.banner_img:void 0,published:t.published?t.published:1,content:t.content?t.content:[]}}}},components:{Card:m["a"],Form:l["a"],FormField:d["j"],Input:r["a"],ImageUpload:d["l"],OSwitch:n["a"],Button:o["a"],Editor:d["e"]}},p=c,b=i("e607"),h=Object(b["a"])(p,s,a,!1,null,null,null);e["a"]=h.exports},"90e9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("section",[e("Header"),e("Editor",{attrs:{onSubmit:t.submit}})],1)},a=[],o=i("8c99"),n=i("7736"),r=i("2af9"),l=i("05b3"),m=i("ed08"),d={name:"BasicTopicCreate",components:{Header:r["k"],Editor:l["a"],Message:o["a"]},computed:{...Object(n["c"])({postInfo:"common/postInfo"})},methods:{submit(t){return new Promise((e,i)=>{m["i"].post("/topic/create",{...t,community_id:this.postInfo.default_community_id}).then(t=>{o["a"].success("专题发布成功"),this.$router.replace("/basic/topic/preview/"+t.data.id),e()}).catch(()=>i())})}}},u=d,c=i("e607"),p=Object(c["a"])(u,s,a,!1,null,null,null);e["default"]=p.exports}}]);