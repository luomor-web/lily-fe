(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-764843f9"],{"07d3":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Steps",{attrs:{current:t.step}},[e("Step",{attrs:{title:"业主信息",content:"通过手机号查找业主"}}),e("Step",{attrs:{title:"装修建筑",content:"选择需要专修的住宅"}}),e("Step",{attrs:{title:"登记成功",content:"装修登记完成"}})],1),0===t.step?e("FindOwer",{on:{"on-find-owner":t.onFindOwer}}):t._e(),1===t.step?e("Form",{ref:"form",attrs:{model:t.form,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormField",{attrs:{title:"业主姓名"}},[t._v(t._s(t.ownerInfo.real_name))]),e("FormField",{attrs:{title:"装修房产",prop:"building_id"}},[e("Select",{attrs:{placeholder:"请选择需要装修的住宅"},model:{value:t.form.building_id,callback:function(e){t.$set(t.form,"building_id",e)},expression:"form.building_id"}},t._l([].concat(t.ownerInfo.houses,t.ownerInfo.merchants),(function(s){return e("Option",{key:s.building_id,attrs:{value:s.building_id}},[t._v(" "+t._s(t._f("building")(s))+" ")])})),1)],1),e("div",{staticClass:"cw-form-actions"},[e("Button",{on:{click:t.preStep}},[t._v("上一步")]),e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("下一步")])],1)],1):t._e(),2===t.step?e("Result",{attrs:{title:"装修登记成功"}},[e("div",{attrs:{slot:"extra"},slot:"extra"},[e("p",[t._v("及时跟进装修进度。")]),e("p",[t._v("提醒业主周末不要装修，噪音大的装修工作集中在早8点至中午12点下午2点至5点。")]),e("p",[t._v("物业公司不能在非合理情况下延期返还装修保证金，存在法律风险。")])]),e("div",{attrs:{slot:"actions"},slot:"actions"},[e("Button",{attrs:{type:"primary"},on:{click:t.goDetail}},[t._v("查看装修信息")])],1)]):t._e()],1)],1)},i=[],n=s("545e"),a=s("13ab"),o=s("fee1"),u=s("8ae2"),c=s("101d"),l=s("e7c9"),d=s("88bd"),p=s("3e79"),h=(s("ed70"),s("7736")),f=s("2af9"),m=s("ed08"),v=s("e49c"),_={name:"BasicFitmentCreate",data(){return{step:0,ownerInfo:{},form:{building_id:null},rules:{building_id:[{required:!0,message:"请选择装修房产"}]},insertId:null,submiting:!1}},mixins:[v["a"]],methods:{preStep(){this.step--},onFindOwer(t){this.ownerInfo=t,this.step++},submit(){this.$refs.form.validate(t=>{t&&(this.submiting=!0,m["i"]({url:"/fitment/create",data:{community_id:this.postInfo.default_community_id,building_id:this.form.building_id,wechat_mp_user_id:this.ownerInfo.id},method:"post"}).then(t=>{this.submiting=!1,this.insertId=t.data.id,this.step++}).catch(()=>this.submiting=!1))})},goDetail(){this.$router.push("/basic/fitment/detail/"+this.insertId)}},computed:{...Object(h["c"])({postInfo:"common/postInfo"})},components:{FindOwer:f["i"],Header:f["k"],Card:p["a"],Button:d["a"],Input:l["a"],Result:f["q"],Steps:c["a"],Step:u["a"],Select:o["a"],Option:a["a"],Form:n["a"],FormField:f["j"],WaterMark:f["s"]}},b=_,S=s("e607"),$=Object(S["a"])(b,r,i,!1,null,null,null);e["default"]=$.exports},"0fc7":function(t,e,s){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{class:t.wrapClasses},[e("div",{class:[t.prefixCls+"-tail"]},[e("i")]),e("div",{class:[t.prefixCls+"-head"]},[e("div",{class:[t.prefixCls+"-head-inner"]},[t.icon||t.$slots.icon||"finish"===t.currentStatus||"error"===t.currentStatus?t.$slots.icon?e("span",{staticClass:"ivu-steps-icon"},[t._t("icon")],2):e("span",{class:t.iconClasses}):e("span",[t._v(t._s(t.stepNumber))])])]),e("div",{class:[t.prefixCls+"-main"]},[e("div",{class:[t.prefixCls+"-title"]},[t._t("title",(function(){return[t._v(t._s(t.title))]}))],2),t.content||t.$slots.content?e("div",{class:[t.prefixCls+"-content"]},[t._t("content",(function(){return[t._v(t._s(t.content))]}))],2):t._e()])])},i=[],n=s("ce17"),a=s("e4a4");const o="ivu-steps",u="ivu-icon";var c={name:"Step",mixins:[n["a"]],props:{status:{validator(t){return Object(a["m"])(t,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:o,stepNumber:"",nextError:!1,total:1,currentStatus:""}},computed:{wrapClasses(){return[o+"-item",`${o}-status-${this.currentStatus}`,{[o+"-custom"]:!!this.icon||!!this.$slots.icon,[o+"-next-error"]:this.nextError}]},iconClasses(){let t="";return this.icon?t=this.icon:"finish"===this.currentStatus?t="ios-checkmark":"error"===this.currentStatus&&(t="ios-close"),[o+"-icon",""+u,{[`${u}-${t}`]:""!==t}]}},watch:{status(t){this.currentStatus=t,"error"===this.currentStatus&&this.$parent.setNextError()}},created(){this.currentStatus=this.status},mounted(){this.dispatch("Steps","append")},beforeDestroy(){this.dispatch("Steps","remove")}},l=c,d=s("e607"),p=Object(d["a"])(l,r,i,!1,null,null,null);e["a"]=p.exports},"101d":function(t,e,s){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{class:t.classes},[t._t("default")],2)},i=[],n=s("e4a4");const a="ivu-steps";function o(t){let e;return function(){if(e)return;e=!0;const s=this,r=arguments,i=function(){e=!1,t.apply(s,r)};this.$nextTick(i)}}var u={name:"Steps",props:{current:{type:Number,default:0},status:{validator(t){return Object(n["m"])(t,["wait","process","finish","error"])},default:"process"},size:{validator(t){return Object(n["m"])(t,["small"])}},direction:{validator(t){return Object(n["m"])(t,["horizontal","vertical"])},default:"horizontal"}},computed:{classes(){return[""+a,`${a}-${this.direction}`,{[`${a}-${this.size}`]:!!this.size}]}},methods:{updateChildProps(t){const e=this.$children.length;this.$children.forEach((s,r)=>{s.stepNumber=r+1,"horizontal"===this.direction&&(s.total=e),t&&s.currentStatus||(r===this.current?"error"!==this.status&&(s.currentStatus="process"):r<this.current?s.currentStatus="finish":s.currentStatus="wait"),"error"!==s.currentStatus&&0!==r&&(this.$children[r-1].nextError=!1)})},setNextError(){this.$children.forEach((t,e)=>{"error"===t.currentStatus&&0!==e&&(this.$children[e-1].nextError=!0)})},updateCurrent(t){if(!(this.current<0||this.current>=this.$children.length))if(t){const t=this.$children[this.current].currentStatus;t||(this.$children[this.current].currentStatus=this.status)}else this.$children[this.current].currentStatus=this.status},debouncedAppendRemove(){return o((function(){this.updateSteps()}))},updateSteps(){this.updateChildProps(!0),this.setNextError(),this.updateCurrent(!0)}},mounted(){this.updateSteps(),this.$on("append",this.debouncedAppendRemove()),this.$on("remove",this.debouncedAppendRemove())},watch:{current(){this.updateChildProps()},status(){this.updateCurrent()}}},c=u,l=s("e607"),d=Object(l["a"])(c,r,i,!1,null,null,null),p=d.exports,h=s("0fc7");p.Step=h["a"];e["a"]=p},"8ae2":function(t,e,s){"use strict";var r=s("0fc7");e["a"]=r["a"]}}]);