(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6584f43a"],{"09d9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"login"},[e("div",{staticClass:"login-form"},[t._m(0),e("h2",{staticClass:"slogan"},[t._v("助力物业服务升级，用心服务万千业主")]),e("Form",{ref:"form",attrs:{model:t.form,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{prop:"account"}},[e("Input",{attrs:{placeholder:"请输入账号",prefix:"ios-contact",size:"large"},on:{"on-enter":t.submit},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),e("FormItem",{attrs:{prop:"password"}},[e("Input",{attrs:{placeholder:"请输入密码",prefix:"ios-lock",size:"large",type:"password"},on:{"on-enter":t.submit},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("FormItem",{attrs:{prop:"captcha"}},[e("Row",{attrs:{gutter:12}},[e("Col",{attrs:{span:14}},[e("Input",{attrs:{placeholder:"验证码",size:"large"},on:{"on-enter":t.submit},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}})],1),e("Col",{attrs:{span:10}},[t.captchaImg?e("img",{attrs:{src:t.captchaImg},on:{click:t.getCaptcha}}):t._e()])],1)],1),e("Button",{attrs:{type:"primary",long:"",loading:t.submiting,size:"large"},on:{click:t.submit}},[t._v("登录")])],1)],1),e("Copyright",{staticClass:"copyright"})],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{staticClass:"img-logo",attrs:{src:s("9b19"),alt:"logo"}}),e("div",{staticClass:"title"},[e("img",{staticClass:"text-logo",attrs:{src:s("2ace"),alt:"烙馍爱家"}})])])}],n=s("be5e"),r=s("9484"),l=s("88bd"),o=s("e7c9"),c=s("5ca3"),h=s("545e"),u=s("5a84"),d=s("e741"),f=s("4d77"),p=s("8c99"),m=s("7736"),b=s("2af9"),v=s("ed08"),g={name:"UserLoginMain",data(){return{form:{account:"",password:"",captcha:""},rules:{account:[{required:!0,message:"请输入账号"},{min:4,message:"账号长度应大于4个字符"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度应大于6个字符"}],captcha:[{required:!0,message:"请输入验证码"},{len:4,message:"请输入正确的验证码"}]},captchaImg:null,submiting:!1}},mounted(){this.getCaptcha().then(()=>{this.getState()}).catch(()=>{})},beforeDestroy(){clearTimeout(this.stateTimer),clearTimeout(this.capatchTimer)},methods:{...Object(m["b"])({updateUserInfo:"common/updateUserInfo"}),getState(){this.ready=!1,this.expired=!1,v["i"].get("/user/state").then(t=>{this.state=t.data.state,this.ready=!0,clearTimeout(this.stateTimer),this.stateTimer=setTimeout(()=>{this.expired=!0},t.data.expire)})},getCaptcha(){return v["i"].get("/user/captcha").then(t=>{this.captchaImg=t.data.img,clearTimeout(this.capatchTimer),this.capatchTimer=setTimeout(()=>{this.getCaptcha()},t.data.expire)}).catch(t=>{-66!==t.code&&p["a"].warning("网速过慢，获取验证码失败")})},submit(){this.$refs.form.validate(t=>{t&&(this.submiting=!0,v["i"].post("/user/account_login",{...this.form}).then(t=>{this.submiting=!1,v["a"].login(t.data.userInfo.id,t.data.token),this.updateUserInfo(t.data),this.$router.replace(this.$route.query.redirect?this.$route.query.redirect:"/"),p["a"].success("登录成功")}).catch(()=>{this.submiting=!1,this.getCaptcha()}))})}},components:{Spin:f["a"],Copyright:b["d"],Tabs:d["a"],TabPane:u["a"],Form:h["a"],FormItem:c["a"],Input:o["a"],Button:l["a"],Row:r["a"],Col:n["a"]}},y=g,x=(s("9a1d"),s("e607")),C=Object(x["a"])(y,a,i,!1,null,null,null);e["default"]=C.exports},"5a84":function(t,e,s){"use strict";var a=s("7c19");e["a"]=a["a"]},"7c19":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.prefixCls,style:t.contentStyle},[t._t("default")],2)},i=[];const n="ivu-tabs-tabpane";var r={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:n,show:!0,currentName:this.name}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()}},watch:{name(t){this.currentName=t,this.updateNav()},label(){this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.updateNav()},destroyed(){this.updateNav()}},l=r,o=s("e607"),c=Object(o["a"])(l,a,i,!1,null,null,null);e["a"]=c.exports},"9a1d":function(t,e,s){"use strict";s("d6fb")},d6fb:function(t,e,s){},e741:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"tabsWrap",class:t.classes},[e("div",{class:[t.prefixCls+"-bar"]},[t.showSlot?e("div",{class:[t.prefixCls+"-nav-right"]},[t._t("extra")],2):t._e(),e("div",{ref:"navContainer",class:[t.prefixCls+"-nav-container"],attrs:{tabindex:"0"},on:{keydown:[t.handleTabKeyNavigation,function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:(e.preventDefault(),t.handleTabKeyboardSelect(!1))}]}},[e("div",{ref:"navWrap",class:[t.prefixCls+"-nav-wrap",t.scrollable?t.prefixCls+"-nav-scrollable":""]},[e("span",{class:[t.prefixCls+"-nav-prev",t.scrollable?"":t.prefixCls+"-nav-scroll-disabled"],on:{click:t.scrollPrev}},[e("Icon",{attrs:{type:"ios-arrow-back"}})],1),e("span",{class:[t.prefixCls+"-nav-next",t.scrollable?"":t.prefixCls+"-nav-scroll-disabled"],on:{click:t.scrollNext}},[e("Icon",{attrs:{type:"ios-arrow-forward"}})],1),e("div",{ref:"navScroll",class:[t.prefixCls+"-nav-scroll"],on:{DOMMouseScroll:t.handleScroll,mousewheel:t.handleScroll}},[e("div",{ref:"nav",class:[t.prefixCls+"-nav"],style:t.navStyle},[e("div",{class:t.barClasses,style:t.barStyle}),t._l(t.navList,(function(s,a){return e("div",{class:t.tabCls(s),attrs:{draggable:t.draggable},on:{click:function(e){return t.handleChange(a)},dblclick:function(e){return t.handleDblclick(a)},contextmenu:function(e){return e.stopPropagation(),t.handleContextmenu(a,e)},selectstart:function(e){return e.stopPropagation(),t.handlePreventSelect(a,e)},dragstart:function(e){return t.handleDrag(a,e)},drop:function(e){return t.handleDrop(a,e)},dragover:function(t){t.preventDefault()}}},[""!==s.icon?e("Icon",{attrs:{type:s.icon}}):t._e(),"function"===s.labelType?e("Render",{attrs:{render:s.label}}):[t._v(t._s(s.label))],t.showClose(s)?e("Icon",{class:[t.prefixCls+"-close"],attrs:{type:t.arrowType,custom:t.customArrowType,size:t.arrowSize},nativeOn:{click:function(e){return e.stopPropagation(),t.handleRemove(a)}}}):t._e()],2)}))],2)])])])]),e("div",{ref:"panes",class:t.contentClasses,style:t.contentStyle},[t._t("default")],2),e("div",{staticClass:"ivu-tabs-context-menu",style:t.contextMenuStyles},[e("Dropdown",{attrs:{trigger:"custom",visible:t.contextMenuVisible,transfer:""},on:{"on-clickoutside":t.handleClickContextMenuOutside}},[e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t._t("contextMenu")],2)],1)],1)])},i=[],n=(s("ed70"),s("4919")),r=s("d6dc"),l=s("1918"),o=s("edf2"),c=s("e4a4"),h=s("ce17"),u=s("a504"),d=s.n(u);const f="ivu-tabs",p=300,m=(t,e,s,a)=>{const i=t.findIndex(t=>t.name===e),n=(i+s+t.length)%t.length,r=t[n];return r.disabled?m(t,r.name,s,a):r},b=(t,e)=>{try{t.focus()}catch(a){}if(document.activeElement==t&&t!==e)return!0;const s=t.children;for(let i of s)if(b(i,e))return!0;return!1};var v={name:"Tabs",mixins:[h["a"]],components:{Icon:n["a"],Render:r["a"],Dropdown:l["a"],DropdownMenu:o["a"]},provide(){return{TabsInstance:this}},props:{value:{type:[String,Number]},type:{validator(t){return Object(c["m"])(t,["line","card"])},default:"line"},size:{validator(t){return Object(c["m"])(t,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1}},data(){return{prefixCls:f,navList:[],barWidth:0,barOffset:0,activeKey:this.value,focusedKey:this.value,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},computed:{classes(){return[""+f,{[f+"-card"]:"card"===this.type,[f+"-mini"]:"small"===this.size&&"line"===this.type,[f+"-no-animation"]:!this.animated}]},contentClasses(){return[f+"-content",{[f+"-content-animated"]:this.animated}]},barClasses(){return[f+"-ink-bar",{[f+"-ink-bar-animated"]:this.animated}]},contentStyle(){const t=this.getTabIndex(this.activeKey),e=0===t?"0%":`-${t}00%`;let s={};return t>-1&&(s={transform:`translateX(${e}) translateZ(0px)`}),s},barStyle(){let t={visibility:"hidden",width:this.barWidth+"px"};return"line"===this.type&&(t.visibility="visible"),this.animated?t.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:t.left=this.barOffset+"px",t},arrowType(){let t="ios-close";return this.$IVIEW&&(this.$IVIEW.tabs.customCloseIcon?t="":this.$IVIEW.tabs.closeIcon&&(t=this.$IVIEW.tabs.closeIcon)),t},customArrowType(){let t="";return this.$IVIEW&&this.$IVIEW.tabs.customCloseIcon&&(t=this.$IVIEW.tabs.customCloseIcon),t},arrowSize(){let t="";return this.$IVIEW&&this.$IVIEW.tabs.closeIconSize&&(t=this.$IVIEW.tabs.closeIconSize),t}},methods:{getTabs(){const t=Object(c["h"])(this,"TabPane"),e=[];return t.forEach(t=>{t.tab&&this.name?t.tab===this.name&&e.push(t):e.push(t)}),e.sort((t,e)=>{if(t.index&&e.index)return t.index>e.index?1:-1}),e},updateNav(){this.navList=[],this.getTabs().forEach((t,e)=>{this.navList.push({labelType:typeof t.label,label:t.label,icon:t.icon||"",name:t.currentName||e,disabled:t.disabled,closable:t.closable,contextMenu:t.contextMenu}),t.currentName||(t.currentName=e),0===e&&(this.activeKey||(this.activeKey=t.currentName||e))}),this.updateStatus(),this.updateBar()},updateBar(){this.$nextTick(()=>{const t=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const e=this.$refs.nav.querySelectorAll(`.${f}-tab`),s=e[t];if(this.barWidth=s?parseFloat(s.offsetWidth):0,t>0){let s=0;const a="small"===this.size?0:16;for(let i=0;i<t;i++)s+=parseFloat(e[i].offsetWidth)+a;this.barOffset=s}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){const t=this.getTabs();t.forEach(t=>t.show=t.currentName===this.activeKey||this.animated)},tabCls(t){return[f+"-tab",{[f+"-tab-disabled"]:t.disabled,[f+"-tab-active"]:t.name===this.activeKey,[f+"-tab-focused"]:t.name===this.focusedKey}]},handleChange(t){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,p);const e=this.navList[t];e&&!e.disabled&&(this.activeKey=e.name,this.$emit("input",e.name),this.$emit("on-click",e.name))},handleDblclick(t){const e=this.navList[t];e&&!e.disabled&&this.$emit("on-dblclick",e.name)},handleContextmenu(t,e){this.contextMenuVisible&&this.handleClickContextMenuOutside(),this.$nextTick(()=>{const s=this.navList[t];if(!s||s.disabled||!s.contextMenu)return;e.preventDefault();const a=this.$refs.tabsWrap,i=a.getBoundingClientRect(),n={left:e.clientX-i.left+"px",top:e.clientY-i.top+"px"};this.contextMenuStyles=n,this.contextMenuVisible=!0,this.$emit("on-contextmenu",s,e,n)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(t,e){const s=this.navList[t];s&&!s.disabled&&s.contextMenu&&e.preventDefault()},handleTabKeyNavigation(t){if(37!==t.keyCode&&39!==t.keyCode)return;const e=39===t.keyCode?1:-1,s=m(this.navList,this.focusedKey,e);this.focusedKey=s.name},handleTabKeyboardSelect(t=!1){if(t)return;const e=this.focusedKey||0,s=this.getTabIndex(e);this.handleChange(s)},handleRemove(t){if(!this.beforeRemove)return this.handleRemoveTab(t);const e=this.beforeRemove(t);e&&e.then?e.then(()=>{this.handleRemoveTab(t)}):this.handleRemoveTab(t)},handleRemoveTab(t){const e=this.getTabs(),s=e[t];if(s.$destroy(),s.currentName===this.activeKey){const s=this.getTabs();let a=-1;if(s.length){const i=e.filter((e,s)=>!e.disabled&&s<t),n=e.filter((e,s)=>!e.disabled&&s>t);a=n.length?n[0].currentName:i.length?i[i.length-1].currentName:s[0].currentName}this.activeKey=a,this.$emit("input",a)}this.$emit("on-tab-remove",s.currentName),this.updateNav()},showClose(t){return"card"===this.type&&(null!==t.closable?t.closable:this.closable)},scrollPrev(){const t=this.$refs.navScroll.offsetWidth,e=this.getCurrentScrollOffset();if(!e)return;let s=e>t?e-t:0;this.setOffset(s)},scrollNext(){const t=this.$refs.nav.offsetWidth,e=this.$refs.navScroll.offsetWidth,s=this.getCurrentScrollOffset();if(t-s<=e)return;let a=t-s>2*e?s+e:t-e;this.setOffset(a)},getCurrentScrollOffset(){const{navStyle:t}=this;return t.transform?Number(t.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(t){return this.navList.findIndex(e=>e.name===t)},setOffset(t){this.navStyle.transform=`translateX(-${t}px)`},scrollToActiveTab(){if(!this.scrollable)return;const t=this.$refs.nav,e=this.$el.querySelector(`.${f}-tab-active`);if(!e)return;const s=this.$refs.navScroll,a=e.getBoundingClientRect(),i=s.getBoundingClientRect(),n=t.getBoundingClientRect(),r=this.getCurrentScrollOffset();let l=r;n.right<i.right&&(l=t.offsetWidth-i.width),a.left<i.left?l=r-(i.left-a.left):a.right>i.right&&(l=r+a.right-i.right),r!==l&&this.setOffset(Math.max(l,0))},updateNavScroll(){const t=this.$refs.nav.offsetWidth,e=this.$refs.navScroll.offsetWidth,s=this.getCurrentScrollOffset();e<t?(this.scrollable=!0,t-s<e&&this.setOffset(t-e)):(this.scrollable=!1,s>0&&this.setOffset(0))},handleScroll(t){t.preventDefault(),t.stopPropagation();const e=t.type;let s=0;"DOMMouseScroll"!==e&&"mousewheel"!==e||(s=t.wheelDelta?t.wheelDelta:40*-(t.detail||0)),s>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){let t=this.$el.parentNode;while(t&&t!==document.body){if(t.style&&"none"===t.style.display)return t;t=t.parentNode}return!1},updateVisibility(t){[...this.$refs.panes.querySelectorAll(`.${f}-tabpane`)].forEach((e,s)=>{t===s?([...e.children].filter(t=>t.classList.contains(f+"-tabpane")).forEach(t=>t.style.visibility="visible"),this.captureFocus&&setTimeout(()=>b(e,e),p)):setTimeout(()=>{[...e.children].filter(t=>t.classList.contains(f+"-tabpane")).forEach(t=>t.style.visibility="hidden")},p)})},handleDrag(t,e){const s=this.navList[t];s&&e.dataTransfer.setData("tab-name",s.name)},handleDrop(t,e){const s=this.navList[t];if(s){const t=e.dataTransfer.getData("tab-name");e.preventDefault();let a=this.navList.map(t=>t.name);const i=parseInt(a.findIndex(e=>e===t)),n=parseInt(a.findIndex(t=>t===s.name));a.splice(n,1,...a.splice(i,1,a[n])),this.$emit("on-drag-drop",t,s.name,i,n,a)}}},watch:{value(t){this.activeKey=t,this.focusedKey=t},activeKey(t){this.focusedKey=t,this.updateBar(),this.updateStatus(),this.broadcast("Table","on-visible-change",!0),this.$nextTick(()=>{this.scrollToActiveTab()});const e=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(e)}},mounted(){this.showSlot=void 0!==this.$slots.extra,this.observer=d()(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const t=this.isInsideHiddenElement();t&&(this.mutationObserver=new c["a"](()=>{"none"!==t.style.display&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeDestroy(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},g=v,y=s("e607"),x=Object(y["a"])(g,a,i,!1,null,null,null),C=x.exports,I=s("7c19");C.Pane=I["a"];e["a"]=C}}]);