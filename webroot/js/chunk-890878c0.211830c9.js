(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-890878c0"],{"0fc7":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{class:t.wrapClasses},[e("div",{class:[t.prefixCls+"-tail"]},[e("i")]),e("div",{class:[t.prefixCls+"-head"]},[e("div",{class:[t.prefixCls+"-head-inner"]},[t.icon||t.$slots.icon||"finish"===t.currentStatus||"error"===t.currentStatus?t.$slots.icon?e("span",{staticClass:"ivu-steps-icon"},[t._t("icon")],2):e("span",{class:t.iconClasses}):e("span",[t._v(t._s(t.stepNumber))])])]),e("div",{class:[t.prefixCls+"-main"]},[e("div",{class:[t.prefixCls+"-title"]},[t._t("title",(function(){return[t._v(t._s(t.title))]}))],2),t.content||t.$slots.content?e("div",{class:[t.prefixCls+"-content"]},[t._t("content",(function(){return[t._v(t._s(t.content))]}))],2):t._e()])])},i=[],r=s("ce17"),o=s("e4a4");const l="ivu-steps",n="ivu-icon";var c={name:"Step",mixins:[r["a"]],props:{status:{validator(t){return Object(o["m"])(t,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:l,stepNumber:"",nextError:!1,total:1,currentStatus:""}},computed:{wrapClasses(){return[l+"-item",`${l}-status-${this.currentStatus}`,{[l+"-custom"]:!!this.icon||!!this.$slots.icon,[l+"-next-error"]:this.nextError}]},iconClasses(){let t="";return this.icon?t=this.icon:"finish"===this.currentStatus?t="ios-checkmark":"error"===this.currentStatus&&(t="ios-close"),[l+"-icon",""+n,{[`${n}-${t}`]:""!==t}]}},watch:{status(t){this.currentStatus=t,"error"===this.currentStatus&&this.$parent.setNextError()}},created(){this.currentStatus=this.status},mounted(){this.dispatch("Steps","append")},beforeDestroy(){this.dispatch("Steps","remove")}},d=c,u=s("e607"),h=Object(u["a"])(d,a,i,!1,null,null,null);e["a"]=h.exports},"101d":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{class:t.classes},[t._t("default")],2)},i=[],r=s("e4a4");const o="ivu-steps";function l(t){let e;return function(){if(e)return;e=!0;const s=this,a=arguments,i=function(){e=!1,t.apply(s,a)};this.$nextTick(i)}}var n={name:"Steps",props:{current:{type:Number,default:0},status:{validator(t){return Object(r["m"])(t,["wait","process","finish","error"])},default:"process"},size:{validator(t){return Object(r["m"])(t,["small"])}},direction:{validator(t){return Object(r["m"])(t,["horizontal","vertical"])},default:"horizontal"}},computed:{classes(){return[""+o,`${o}-${this.direction}`,{[`${o}-${this.size}`]:!!this.size}]}},methods:{updateChildProps(t){const e=this.$children.length;this.$children.forEach((s,a)=>{s.stepNumber=a+1,"horizontal"===this.direction&&(s.total=e),t&&s.currentStatus||(a===this.current?"error"!==this.status&&(s.currentStatus="process"):a<this.current?s.currentStatus="finish":s.currentStatus="wait"),"error"!==s.currentStatus&&0!==a&&(this.$children[a-1].nextError=!1)})},setNextError(){this.$children.forEach((t,e)=>{"error"===t.currentStatus&&0!==e&&(this.$children[e-1].nextError=!0)})},updateCurrent(t){if(!(this.current<0||this.current>=this.$children.length))if(t){const t=this.$children[this.current].currentStatus;t||(this.$children[this.current].currentStatus=this.status)}else this.$children[this.current].currentStatus=this.status},debouncedAppendRemove(){return l((function(){this.updateSteps()}))},updateSteps(){this.updateChildProps(!0),this.setNextError(),this.updateCurrent(!0)}},mounted(){this.updateSteps(),this.$on("append",this.debouncedAppendRemove()),this.$on("remove",this.debouncedAppendRemove())},watch:{current(){this.updateChildProps()},status(){this.updateCurrent()}}},c=n,d=s("e607"),u=Object(d["a"])(c,a,i,!1,null,null,null),h=u.exports,p=s("0fc7");h.Step=p["a"];e["a"]=h},"3fa7":function(t,e,s){"use strict";s("5f70")},"5f70":function(t,e,s){},"8ae2":function(t,e,s){"use strict";var a=s("0fc7");e["a"]=a["a"]},a34c:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("FeeDetail",{on:{"on-fee-load":t.onFeeLoad}}),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1}},[e("Steps",{attrs:{current:t.step}},[e("Step",{attrs:{title:"业主信息",content:"确认业主信息"}}),e("Step",{attrs:{title:"费用详细",content:"确认物业费用详细"}}),e("Step",{attrs:{title:"缴费成功",content:"物业费现场缴费成功"}})],1),0===t.step?e("FindOwer",{on:{"on-find-owner":t.onFindOwer}}):t._e(),1===t.step?e("div",{staticClass:"ivu-form"},[0===t.list.length?[e("Alert",{attrs:{type:"success","show-icon":""}},[t._v(" 业主"+t._s(t.ownerInfo.real_name)+"名下房产物业费用已缴清，请勿重复付款。 "),e("p",{attrs:{slot:"desc"},slot:"desc"},[t._v(" 平台按照房产信息判断是否收取物业费用，多位业主同时绑定同一房产时仅允许其中一位业主支付物业费。 ")])])]:[e("ul",{staticClass:"fee-detail"},[e("li",[e("div",[t._v(" 业主姓名 ")]),e("div",[t._v(" "+t._s(t.ownerInfo.real_name)+" ")])]),t._l(t.list,(function(s,a){return e("li",{key:s.building_id},[e("div",[e("span",[t._v(t._s(a+1))]),t._v(" "+t._s(t._f("building")(s))+" ")]),e("div",[t._v(" "+t._s(t.computedItemFee(s))+" ")])])})),e("li",{staticClass:"right"},[t._v("总计："+t._s(t.total)+"元")])],2),e("div",{staticClass:"cw-form-actions"},[e("Button",{on:{click:t.preStep}},[t._v("上一步")]),e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("下一步")])],1)]],2):t._e(),2===t.step?e("Result",{attrs:{title:"物业费现场缴费成功"}},[e("div",{attrs:{slot:"actions"},slot:"actions"},[e("Button",{attrs:{type:"primary"},on:{click:t.goOrderList}},[t._v("查看已缴费订单")])],1)]):t._e(),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)},i=[],r=s("4c91"),o=s("88bd"),l=s("4d77"),n=s("8ae2"),c=s("101d"),d=s("3e79"),u=(s("ed70"),s("7736")),h=s("2af9"),p=s("add6"),_=s("ed08"),f={name:"OaFinancePay",data(){return{step:0,ownerInfo:{},fee:{},list:[],fetching:!1,submiting:!1}},methods:{onFeeLoad(t){this.fee=t},onFindOwer(t){this.ownerInfo=t,this.step++,this.fetching=!0;const e={community_id:this.postInfo.default_community_id,property_fee_id:this.$route.params.id,user_id:t.id};_["i"].post("/payment/prepay",e).then(t=>{this.fetching=!1,this.list=t.data.list}).catch(()=>this.fetching=!1)},preStep(){this.step--},computedItemFee(t){let e,s;return 1===t.type?(e=this.fee.house_fee,s=this.fee.computed_house_fee_by_area):2===t.type?(e=this.fee.carport_fee,s=this.fee.computed_carport_fee_by_area):3===t.type?(e=this.fee.warehoure_fee,s=this.fee.computed_warehouse_fee_by_area):4===t.type?(e=this.fee.merchant_fee,s=this.fee.computed_merchant_fee_by_area):5===t.type&&(e=this.fee.garage_fee,s=this.fee.computed_garage_fee_by_area),s?`建筑面积${t.construction_area}㎡，每平米收取${_["h"].yuan(e)}元，总计：${_["h"].yuan(Math.floor(t.construction_area*e))}元`:`收取年度物业费${_["h"].yuan(e)}元`},submit(){this.submiting=!0;const t={building_ids:this.list.map(t=>t.building_id),community_id:this.postInfo.default_community_id,property_fee_id:this.$route.params.id,user_id:this.ownerInfo.id};_["i"].post("/payment/pay",t).then(()=>{this.submiting=!1,this.step++}).catch(()=>this.submiting=!1)},goOrderList(){this.$router.push("/oa/finance/order/"+this.$route.params.id)}},computed:{...Object(u["c"])({postInfo:"common/postInfo"}),total(){let t=0;return this.list.forEach(e=>{let s,a;1===e.type?(s=this.fee.house_fee,a=this.fee.computed_house_fee_by_area):2===e.type?(s=this.fee.carport_fee,a=this.fee.computed_carport_fee_by_area):3===e.type?(s=this.fee.warehoure_fee,a=this.fee.computed_warehouse_fee_by_area):4===e.type?(s=this.fee.merchant_fee,a=this.fee.computed_merchant_fee_by_area):5===e.type&&(s=this.fee.garage_fee,a=this.fee.computed_garage_fee_by_area),t+=a?Math.floor(e.construction_area*s):Math.floor(s)}),_["h"].yuan(t)}},components:{Card:d["a"],Header:h["k"],FeeDetail:p["a"],WaterMark:h["s"],Steps:c["a"],Step:n["a"],FindOwer:h["i"],Spin:l["a"],Button:o["a"],Alert:r["a"],Result:h["q"]}},m=f,y=(s("3fa7"),s("e607")),v=Object(y["a"])(m,a,i,!1,null,null,null);e["default"]=v.exports},add6:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("Card",{attrs:{"dis-hover":"",bordered:!1,title:"收费信息"}},[e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("小区名称")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.community_name))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("收费年份")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.start_year)+"年至"+t._s(t.detail.end_year)+"年")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("住宅物业费")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("yuan")(t.detail.house_fee))+"元")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 住宅物业费计算方式 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.computed_house_fee_by_area?"magenta":"default"}},[t._v(" "+t._s(t.detail.computed_house_fee_by_area?"建筑面积":"单位建筑")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("车位物业费")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("yuan")(t.detail.carport_fee))+"元")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 车位物业费计算方式 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.computed_carport_fee_by_area?"magenta":"default"}},[t._v(" "+t._s(t.detail.computed_carport_fee_by_area?"建筑面积":"单位建筑")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("仓房物业费")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("yuan")(t.detail.warehoure_fee))+"元")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 车位物业费计算方式 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.computed_warehouse_fee_by_area?"magenta":"default"}},[t._v(" "+t._s(t.detail.computed_warehouse_fee_by_area?"建筑面积":"单位建筑")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("商户物业费")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("yuan")(t.detail.merchant_fee))+"元")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 商户物业费计算方式 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.computed_merchant_fee_by_area?"magenta":"default"}},[t._v(" "+t._s(t.detail.computed_merchant_fee_by_area?"建筑面积":"单位建筑")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("车库物业费")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("yuan")(t.detail.garage_fee))+"元")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 车库物业费计算方式 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.computed_garage_fee_by_area?"magenta":"default"}},[t._v(" "+t._s(t.detail.computed_garage_fee_by_area?"建筑面积":"单位建筑")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 微信公众号推送收费通知 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.wechat_push?"green":"default"}},[t._v(" "+t._s(t.detail.wechat_push?"是":"否")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 短信推送收费通知 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.sms_push?"green":"default"}},[t._v(" "+t._s(t.detail.sms_push?"是":"否")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 收费创建人 ")]),e("div",{staticClass:"detail-content"},[e("router-link",{attrs:{to:"/oa/hr/colleague/detail/"+t.detail.created_by}},[t._v(" "+t._s(t.detail.real_name)+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("创建时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.created_at)))])])],1),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[],r=s("c03a"),o=s("be5e"),l=s("9484"),n=s("4d77"),c=s("3e79"),d=s("7736"),u=s("ed08"),h={name:"FinanceFeeDetail",data(){return{fetching:!0,detail:{}}},mounted(){this.postInfo.default_community_id&&this.getDetail()},methods:{getDetail(){const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id};u["i"].post("/payment/detail",t).then(t=>{this.fetching=!1,this.detail=t.data,this.$emit("on-fee-load",t.data)})}},computed:{...Object(d["c"])({postInfo:"common/postInfo",userInfo:"common/userInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},watch:{"postInfo.default_community_id"(){this.getDetail()}},components:{Card:c["a"],Spin:n["a"],Row:l["a"],Col:o["a"],Tag:r["a"]}},p=h,_=s("e607"),f=Object(_["a"])(p,a,i,!1,null,null,null);e["a"]=f.exports},c03a:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return t.fade?e("transition",{attrs:{name:"fade"}},[e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)]):e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)},i=[],r=s("4b1c"),o=s("e4a4");const l="ivu-tag",n=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],c=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"];var d={name:"Tag",components:{Icon:r["a"]},props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(t){return Object(o["m"])(t,["border","dot"])}},name:{type:[String,Number]},fade:{type:Boolean,default:!0},size:{validator(t){return Object(o["m"])(t,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[""+l,`${l}-size-${this.size}`,{[`${l}-${this.color}`]:!!this.color&&Object(o["m"])(this.color,n),[`${l}-${this.type}`]:!!this.type,[l+"-closable"]:this.closable,[l+"-checked"]:this.isChecked}]},wraperStyles(){return Object(o["m"])(this.color,n)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:"dot"!==this.type&&"border"!==this.type&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[l+"-text","border"===this.type&&Object(o["m"])(this.color,n)?`${l}-color-${this.color}`:"","dot"!==this.type&&"border"!==this.type&&"default"!==this.color&&this.isChecked&&c.indexOf(this.color)<0?l+"-color-white":""]},dotClasses(){return l+"-dot-inner"},iconClass(){return"dot"===this.type?"":"border"===this.type?Object(o["m"])(this.color,n)?`${l}-color-${this.color}`:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&"dot"===this.type},lineColor(){return"dot"===this.type?"":"border"===this.type?void 0!==this.color?Object(o["m"])(this.color,n)?"":this.color:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},borderColor(){return void 0!==this.color?"default"===this.color?"":this.color:""},dotColor(){return void 0!==this.color?Object(o["m"])(this.color,n)?"":this.color:""},textColorStyle(){return Object(o["m"])(this.color,n)?{}:"dot"!==this.type&&"border"!==this.type?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return Object(o["m"])(this.color,n)?{}:{background:this.dotColor}},defaultTypeColor(){return"dot"!==this.type&&"border"!==this.type&&void 0!==this.color?Object(o["m"])(this.color,n)?"":this.color:""}},methods:{close(t){void 0===this.name?this.$emit("on-close",t):this.$emit("on-close",t,this.name)},check(){if(!this.checkable)return;const t=!this.isChecked;this.isChecked=t,void 0===this.name?this.$emit("on-change",t):this.$emit("on-change",t,this.name)}},watch:{checked(t){this.isChecked=t}}},u=d,h=s("e607"),p=Object(h["a"])(u,a,i,!1,null,null,null),_=p.exports;e["a"]=_}}]);