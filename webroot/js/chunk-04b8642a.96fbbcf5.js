(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04b8642a"],{"2f92":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header"),e("Editor",{attrs:{onSubmit:t.submit}})],1)},s=[],r=o("8c99"),a=(o("ed70"),o("7736")),l=o("2af9"),n=o("7b77"),m=o("ed08"),u={name:"OaPartyCreate",components:{Header:l["k"],Editor:n["a"],Message:r["a"],WaterMark:l["s"]},methods:{submit(t){return new Promise((e,o)=>{m["i"].post("/party/create",{...t,community_id:this.postInfo.default_community_id}).then(t=>{r["a"].success("党建党讯发布成功"),this.$router.push("/oa/party/detail/"+t.data.id),e()}).catch(()=>o())})}},computed:{...Object(a["c"])({postInfo:"common/postInfo"})}},c=u,d=o("e607"),p=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=p.exports},"7b77":function(t,e,o){"use strict";var i=function(){var t=this,e=t._self._c;return e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormField",{attrs:{title:"文章来源："}},[t._v(t._s(t.community_name)+"小区")]),e("FormField",{attrs:{prop:"title",title:"文章标题："}},[e("Input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("FormField",{attrs:{title:"推送首页：",prop:"carousel"}},[e("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.carousel,callback:function(e){t.$set(t.form,"carousel",e)},expression:"form.carousel"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("否")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("是")])])],1),t.form.carousel?e("FormField",{attrs:{title:"封面图片：",prop:"cover_img",label:"请上传1200*712像素图片"}},[e("ImageUpload",{attrs:{dir:"party",width:1200,height:712},model:{value:t.form.cover_img,callback:function(e){t.$set(t.form,"cover_img",e)},expression:"form.cover_img"}})],1):t._e(),e("FormField",{attrs:{title:"发布：",prop:"published"}},[e("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:t.form.published,callback:function(e){t.$set(t.form,"published",e)},expression:"form.published"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("否")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("是")])])],1),e("FormField",{attrs:{prop:"content",title:"文章内容："}},[e("Editor",{attrs:{dir:"party"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),e("div",{staticClass:"cw-form-actions"},[e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v(" "+t._s(t.update?"更新":"发布")+" ")])],1)],1)],1)},s=[],r=o("37a2"),a=o("88bd"),l=o("e7c9"),n=o("545e"),m=o("3e79"),u=o("2af9"),c=o("e49c"),d=o("7736"),p={name:"PartyEditor",props:{update:Boolean,onSubmit:Function,detail:{type:Object,default:()=>({})}},data(){return{labelWidth:160,form:{title:this.detail.title?this.detail.title:"",carousel:this.detail.carousel?this.detail.carousel:0,cover_img:this.detail.cover_img?this.detail.cover_img:"",published:this.detail.published?this.detail.published:0,content:this.detail.content?this.detail.content:[]},rules:{title:[{required:!0,message:"请输入文章标题"},{max:56,message:"文章标题不能超过56个字"}],cover_img:[{required:!0,message:"请上传封面图片"}],carousel:[{required:!0,type:"number",message:"请选择是否推送首页"}],published:[{required:!0,type:"number",message:"请选择是否发布文章"}],content:[{required:!0,message:"请输入文章内容",type:"array"}]},submiting:!1}},mixins:[c["a"]],methods:{submit(){this.$refs.form.validate(t=>{t&&(this.submiting=!0,this.onSubmit(this.form).then(()=>{this.submiting=!1},()=>{this.submiting=!1}))})}},computed:{...Object(d["c"])({postInfo:"common/postInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},watch:{detail:{deep:!0,handler(t){this.form={title:t.title?t.title:"",carousel:t.carousel?t.carousel:0,cover_img:t.cover_img?t.cover_img:"",published:t.published?t.published:0,content:t.content?t.content:[]}}}},components:{Card:m["a"],Form:n["a"],FormField:u["j"],Input:l["a"],Button:a["a"],Editor:u["e"],OSwitch:r["a"],ImageUpload:u["l"]}},f=p,h=o("e607"),b=Object(h["a"])(f,i,s,!1,null,null,null);e["a"]=b.exports}}]);