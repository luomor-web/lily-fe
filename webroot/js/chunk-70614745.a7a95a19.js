(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70614745"],{"0fd0":function(t,e,a){"use strict";a("619b")},"619b":function(t,e,a){},a6b3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header"),e("Row",{attrs:{gutter:22}},[e("Col",{attrs:{span:8}},[e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"收取保证金"}},[e("h2",{staticClass:"total-fee green"},[t._v(" "+t._s(t._f("yuan")(t.chart.type[0]))+" "),e("small",[t._v("元")])])])],1),e("Col",{attrs:{span:8}},[e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"退还保证金"}},[e("h2",{staticClass:"total-fee red"},[t._v(" "+t._s(t._f("yuan")(t.chart.type[0]))+" "),e("small",[t._v("元")])])])],1),e("Col",{attrs:{span:8}},[e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"退还比例"}},[e("div",{ref:"chart2",staticClass:"return-chart"})])],1)],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"押金统计"}},[e("div",{ref:"chart1",staticClass:"cash-chart"})]),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[],r=a("be5e"),o=a("9484"),n=a("4d77"),h=a("3e79"),c=(a("ed70"),a("7736")),l=a("2af9"),d=a("ed08"),f=a("2f42"),u=a.n(f),p=a("a70e"),m={name:"StatisticFitment",data(){return{fetching:!0,chart:{type:[0,0],line:[]}}},mounted(){this.postInfo.default_community_id&&this.getDetail(),this.$nextTick(()=>{this.cashChart=p["b"](this.$refs.chart1),this.returnChart=p["b"](this.$refs.chart2)}),window.addEventListener("resize",this.onResize,!1)},beforeDestroy(){window.removeEventListener("resize",this.onResize),this.cashChart.dispose(),this.returnChart.dispose()},methods:{onResize(){this.cashChart.resize(),this.returnChart.resize()},getDetail(){const{postInfo:t}=this;d["i"].post("/statistic/fitment",{community_id:t.default_community_id}).then(t=>{const e=[],a=[0,0];t.data.list.forEach(({cash_deposit:t,is_return_cash_deposit:s,created_at:i})=>{t?(a[0]+=t,a[1]+=s?t:0,e.push([u()(i).format("YYYY-MM-DD"),d["h"].yuan(t)])):e.push([u()(i).format("YYYY-MM-DD"),0])}),this.chart={type:a,line:e},this.drawChart(),this.fetching=!1}).catch(()=>this.fetching=!1)},drawChart(){const{line:t,type:e}=this.chart;this.cashChart.setOption({grid:{top:"3%",left:"5%",right:"3%",bottom:"8%"},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.6)",borderWidth:0,textStyle:{color:"#fff"}},xAxis:{data:t.map(t=>t[0]),axisLabel:{color:"#999"},axisLine:{show:!0,lineStyle:{color:"#f5f5f5"}},axisTick:{show:!0,lineStyle:{color:"#f5f5f5"},alignWithLabel:!0},axisPointer:{show:!0,label:{show:!1}}},yAxis:{nameLocation:"center",splitNumber:5,lineStyle:{color:"#f5f5f5"},axisLabel:{color:"#999"}},series:[{type:"line",showSymbol:!1,data:t.map(t=>t[1])}]}),this.returnChart.setOption({tooltip:{trigger:"item"},series:[{name:"退还比例",type:"pie",radius:[10,50],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:[{name:"收取费用",value:d["h"].yuan(e[0])},{name:"退费费用",value:d["h"].yuan(e[1])}]}]})}},computed:{...Object(c["c"])({postInfo:"common/postInfo"})},watch:{"postInfo.default_community_id"(){this.getDetail()}},components:{Header:l["k"],Card:h["a"],WaterMark:l["s"],Spin:n["a"],Row:o["a"],Col:r["a"]}},C=m,b=(a("0fd0"),a("e607")),y=Object(b["a"])(C,s,i,!1,null,null,null);e["default"]=y.exports}}]);