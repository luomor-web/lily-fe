(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a96a60d8"],{"41d7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("Card",{attrs:{"dis-hover":"",bordered:!1,title:"基础信息"}},[e("div",{attrs:{slot:"extra"},slot:"extra"},[e("a",{on:{click:t.goUpdate}},[e("Icon",{attrs:{type:"ios-paper-plane"}}),t._v(" 更新信息 ")],1),e("a",{on:{click:t.reset}},[e("Icon",{attrs:{type:"ios-lock"}}),t._v(" 重置密码 ")],1)]),e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("姓名")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.real_name?t.detail.info.real_name:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 性别 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.sex.color}},[t._v(t._s(t.sex.text))])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("身份证号")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.idcard?t.detail.info.idcard:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("手机号码")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.phone?t.detail.info.phone:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("登录账号")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.account?t.detail.info.account:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("部门")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.department?t.detail.info.department:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("岗位")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.job?t.detail.info.job:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 头像 ")]),e("div",{staticClass:"detail-content"},[!t.fetching&&t.detail.info.avatar_url?e("Images",{attrs:{imgs:[t.detail.info.avatar_url]}}):e("span",[t._v("暂无上传")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 是否离职 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.leave_office?"error":"green"}},[t._v(" "+t._s(t.detail.info.leave_office?"已离职":"工作中")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 是否关注公众号 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.subscribed?"success":"warning"}},[t._v(" "+t._s(t.detail.info.subscribed?"已关注":"未关注")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("可访问小区")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.access_community))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("访问权限")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.access_name))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("权限详细")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.access))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("入职时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.join_company_at)))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("账号创建时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.created_at)))])])],1)],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"入职流程"}},[t.detail.createInfo?e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 处理人员 ")]),e("div",{staticClass:"detail-content"},[e("router-link",{attrs:{to:"/oa/hr/colleague/detail/"+t.detail.createInfo.id}},[t._v(" "+t._s(t.detail.createInfo.real_name)+" ")])],1)])],1):e("Empty",{attrs:{label:"未查询到流程处理人员，系统管理员会没有入职流程"}})],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"离入职记录"}},[e("span",{attrs:{slot:"extra"},slot:"extra"},[t.userInfo.id!==t.detail.info.id?e("a",{on:{click:t.updateStatus}},[t._v(" "+t._s(t.detail.info.leave_office?"恢复入职":"办理离职")+" ")]):t._e()]),e("Table",{attrs:{data:t.detail.joinRecord,columns:t.columns}})],1),e("Modal",{attrs:{title:`重置「${t.detail.info.real_name}」登录密码`},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("Form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{label:"登录密码：",prop:"password"}},[e("Input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("FormItem",{attrs:{label:"确认登录密码：",prop:"password2"}},[e("Input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:t.form.password2,callback:function(e){t.$set(t.form,"password2",e)},expression:"form.password2"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:t.hideModal}},[t._v("取消")]),e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("更新")])],1)],1),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},o=[],i=s("e7c9"),l=s("88bd"),r=s("5ca3"),n=s("545e"),c=s("4b1c"),d=s("2af6"),h=s("be5e"),p=s("9484"),u=s("4d77"),m=s("3e79"),f=s("8c99"),v=s("7c0d"),b=s("c03a"),_=(s("ed70"),s("00e5"),s("7736")),C=s("2af9"),g=s("ed08"),y=s("2f42"),w=s.n(y),k={name:"OaHrDetail",data(){return{fetching:!0,detail:{info:{},createInfo:null,joinRecord:[],communityList:[]},columns:[{title:"操作人",minWidth:120,render:(t,e)=>t("a",{on:{click:()=>this.$router.push("/oa/hr/detail/"+e.row.operated_user_id)}},e.row.real_name)},{title:"操作事项",minWidth:120,render:(t,e)=>t(b["a"],{props:{color:e.row.status?"error":"green"}},e.row.status?"离职":"入职")},{title:"操作时间",minWidth:120,render:(t,e)=>t("span",w()(e.row.created_at).format("YYYY-MM-DD HH:mm:ss"))}],visible:!1,form:{password:void 0,password2:void 0},rules:{password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度应大于6个字符"}],password2:[{required:!0,message:"请输入确认密码"},{min:6,message:"密码长度应大于6个字符"},{validator:(t,e,s)=>{e&&this.form.password&&e===this.form.password?s():s(new Error("两次密码输入不一致"))},message:"两次密码输入不一致"}]},submiting:!1}},mounted(){this.getDetail()},methods:{getDetail(){g["i"].get("/hr/detail/"+this.$route.params.id).then(t=>{this.fetching=!1,this.detail=t.data}).catch(()=>this.fetching=!1)},goUpdate(){this.$router.push("/oa/hr/update/"+this.$route.params.id)},updateStatus(){v["a"].confirm({title:"请确认",content:`是否要为员工${this.detail.info.real_name}办理「${this.detail.info.leave_office?"入职":"离职"}」${this.detail.info.leave_office?"":"，请确认该员工已经处理完所有流程审批工作，如果是流程审批人请联系管理员修改"}`,onOk:()=>{const t=this.detail.info.leave_office?0:1,e=this.detail.info.leave_office?"/hr/recover":"/hr/leave";g["i"].get(`${e}/${this.detail.info.id}`).then(e=>{this.detail.info={...this.detail.info,leave_office:t},this.detail.joinRecord=[{operated_user_id:this.userInfo.id,real_name:this.userInfo.real_name,status:t,created_at:e.data.created_at}].concat(this.detail.joinRecord),f["a"].success("操作成功")}).catch(()=>{})}})},reset(){this.visible=!0,this.$refs.form.resetFields()},hideModal(){this.visible=!1},submit(){this.$refs.form.validate(t=>{if(!t)return;const e={user_id:this.$route.params.id,password:this.form.password};this.submiting=!0,g["i"].post("/hr/reset",e).then(()=>{this.submiting=!1,this.form={password:void 0,password2:void 0},f["a"].success("重置登录密码成功"),this.hideModal()}).catch(()=>this.submiting=!1)})}},computed:{...Object(_["c"])({userInfo:"common/userInfo"}),sex(){let t,e;return 1===this.detail.info.gender?(t="blue",e="男"):2===this.detail.info.gender?(t="magenta",e="女"):(t="default",e="未知"),{color:t,text:e}},access(){if(!this.detail.info.content)return"";const t=[];return this.detail.info.content.forEach(e=>{t.push(g["j"].text(e))}),t.join("，")},access_community(){if(!this.detail.communityList)return"";const t=[];return this.detail.communityList.forEach(({name:e})=>{t.push(e)}),t.join("，")}},watch:{"$route.params.id"(){this.getDetail()}},components:{Card:m["a"],Spin:u["a"],Header:C["k"],Row:p["a"],Col:h["a"],Tag:b["a"],Images:C["m"],Empty:C["f"],Table:d["a"],WaterMark:C["s"],Icon:c["a"],Form:n["a"],FormItem:r["a"],Button:l["a"],Input:i["a"],Modal:v["a"]}},x=k,$=s("e607"),j=Object($["a"])(x,a,o,!1,null,null,null);e["default"]=j.exports},c03a:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return t.fade?e("transition",{attrs:{name:"fade"}},[e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)]):e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)},o=[],i=s("4b1c"),l=s("e4a4");const r="ivu-tag",n=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],c=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"];var d={name:"Tag",components:{Icon:i["a"]},props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(t){return Object(l["m"])(t,["border","dot"])}},name:{type:[String,Number]},fade:{type:Boolean,default:!0},size:{validator(t){return Object(l["m"])(t,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[""+r,`${r}-size-${this.size}`,{[`${r}-${this.color}`]:!!this.color&&Object(l["m"])(this.color,n),[`${r}-${this.type}`]:!!this.type,[r+"-closable"]:this.closable,[r+"-checked"]:this.isChecked}]},wraperStyles(){return Object(l["m"])(this.color,n)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:"dot"!==this.type&&"border"!==this.type&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[r+"-text","border"===this.type&&Object(l["m"])(this.color,n)?`${r}-color-${this.color}`:"","dot"!==this.type&&"border"!==this.type&&"default"!==this.color&&this.isChecked&&c.indexOf(this.color)<0?r+"-color-white":""]},dotClasses(){return r+"-dot-inner"},iconClass(){return"dot"===this.type?"":"border"===this.type?Object(l["m"])(this.color,n)?`${r}-color-${this.color}`:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&"dot"===this.type},lineColor(){return"dot"===this.type?"":"border"===this.type?void 0!==this.color?Object(l["m"])(this.color,n)?"":this.color:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},borderColor(){return void 0!==this.color?"default"===this.color?"":this.color:""},dotColor(){return void 0!==this.color?Object(l["m"])(this.color,n)?"":this.color:""},textColorStyle(){return Object(l["m"])(this.color,n)?{}:"dot"!==this.type&&"border"!==this.type?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return Object(l["m"])(this.color,n)?{}:{background:this.dotColor}},defaultTypeColor(){return"dot"!==this.type&&"border"!==this.type&&void 0!==this.color?Object(l["m"])(this.color,n)?"":this.color:""}},methods:{close(t){void 0===this.name?this.$emit("on-close",t):this.$emit("on-close",t,this.name)},check(){if(!this.checkable)return;const t=!this.isChecked;this.isChecked=t,void 0===this.name?this.$emit("on-change",t):this.$emit("on-change",t,this.name)}},watch:{checked(t){this.isChecked=t}}},h=d,p=s("e607"),u=Object(p["a"])(h,a,o,!1,null,null,null),m=u.exports;e["a"]=m}}]);