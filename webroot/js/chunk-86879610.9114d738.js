(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86879610"],{c03a:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.fade?e("transition",{attrs:{name:"fade"}},[e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)]):e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)},a=[],o=s("4b1c"),l=s("e4a4");const r="ivu-tag",n=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],c=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"];var d={name:"Tag",components:{Icon:o["a"]},props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(t){return Object(l["m"])(t,["border","dot"])}},name:{type:[String,Number]},fade:{type:Boolean,default:!0},size:{validator(t){return Object(l["m"])(t,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[""+r,`${r}-size-${this.size}`,{[`${r}-${this.color}`]:!!this.color&&Object(l["m"])(this.color,n),[`${r}-${this.type}`]:!!this.type,[r+"-closable"]:this.closable,[r+"-checked"]:this.isChecked}]},wraperStyles(){return Object(l["m"])(this.color,n)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:"dot"!==this.type&&"border"!==this.type&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[r+"-text","border"===this.type&&Object(l["m"])(this.color,n)?`${r}-color-${this.color}`:"","dot"!==this.type&&"border"!==this.type&&"default"!==this.color&&this.isChecked&&c.indexOf(this.color)<0?r+"-color-white":""]},dotClasses(){return r+"-dot-inner"},iconClass(){return"dot"===this.type?"":"border"===this.type?Object(l["m"])(this.color,n)?`${r}-color-${this.color}`:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&"dot"===this.type},lineColor(){return"dot"===this.type?"":"border"===this.type?void 0!==this.color?Object(l["m"])(this.color,n)?"":this.color:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},borderColor(){return void 0!==this.color?"default"===this.color?"":this.color:""},dotColor(){return void 0!==this.color?Object(l["m"])(this.color,n)?"":this.color:""},textColorStyle(){return Object(l["m"])(this.color,n)?{}:"dot"!==this.type&&"border"!==this.type?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return Object(l["m"])(this.color,n)?{}:{background:this.dotColor}},defaultTypeColor(){return"dot"!==this.type&&"border"!==this.type&&void 0!==this.color?Object(l["m"])(this.color,n)?"":this.color:""}},methods:{close(t){void 0===this.name?this.$emit("on-close",t):this.$emit("on-close",t,this.name)},check(){if(!this.checkable)return;const t=!this.isChecked;this.isChecked=t,void 0===this.name?this.$emit("on-change",t):this.$emit("on-change",t,this.name)}},watch:{checked(t){this.isChecked=t}}},u=d,h=s("e607"),p=Object(h["a"])(u,i,a,!1,null,null,null),m=p.exports;e["a"]=m},d154:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("Card",{attrs:{"dis-hover":"",bordered:!1,title:"车辆信息"}},[e("span",{attrs:{slot:"extra"},slot:"extra"},[t.detail.info.sync?t._e():e("a",{on:{click:t.confirmSync}},[e("Icon",{attrs:{type:"md-sync"}}),t._v(" 车辆信息已同步 ")],1)]),e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("车辆编号")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.num))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("车牌号码")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.car_number))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("小区名称")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.community_name))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 绑定房产 ")]),e("div",{staticClass:"detail-content"},[t.userInfo.access.includes(t.ROLES.FCDA)?e("router-link",{attrs:{to:"/basic/building/detail/"+t.detail.info.building_id}},[t._v(" "+t._s(t.building)+" ")]):e("span",[t._v(" "+t._s(t.building)+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 业主姓名 ")]),e("div",{staticClass:"detail-content"},[t.userInfo.access.includes(t.ROLES.YZDA)?e("router-link",{attrs:{to:"/basic/owner/detail/"+t.detail.info.wechat_mp_user_id}},[t._v(" "+t._s(t.detail.info.real_name)+" ")]):e("span",[t._v(t._s(t.detail.info.real_name))])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 车辆类型 ")]),e("div",{staticClass:"detail-content"},[t._v(" "+t._s(1===t.detail.info.car_type?"7座及以下小客车/小型货车":"7座以上客车/中大型货车")+" ")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 新能源 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.is_new_energy?"success":"default"}},[t._v(" "+t._s(t.detail.info.is_new_energy?"是":"否")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 绑定状态 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.status?"green":"purple"}},[t._v(" "+t._s(t.detail.info.status?"绑定中":"已解绑")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 同步状态 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.sync?"success":"error"}},[t._v(" "+t._s(t.detail.info.sync?"已同步":"未同步")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("创建时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.created_at)))])])],1)],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"解绑/恢复绑定"}},[e("Button",{attrs:{type:t.detail.info.status?"error":"success",loading:t.submiting},on:{click:t.submit}},[t._v(" "+t._s(t.detail.info.status?"解除绑定":"恢复绑定")+" ")])],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"操作历史"}},[e("Table",{attrs:{stripe:"",columns:t.columns,data:t.detail.operateList}})],1),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},a=[],o=s("4b1c"),l=s("2af6"),r=s("88bd"),n=s("c03a"),c=s("be5e"),d=s("9484"),u=s("4d77"),h=s("3e79"),p=s("8c99"),m=s("7c0d"),_=(s("ed70"),s("7736")),f=s("2af9"),b=s("ed08"),y=s("0373"),C=s.n(y),g=s("2f42"),v=s.n(g),k={name:"BasicCarDetail",data(){return{ROLES:C.a,fetching:!0,detail:{info:{},operateList:[]},submiting:!1,columns:[{title:"操作类型",minWidth:100,render:(t,e)=>t("span",e.row.status?"绑定车辆":"解绑车辆")},{title:"操作身份",minWidth:100,render:(t,e)=>{let s;switch(e.row.operate_by){case 1:s="自己";break;case 2:s="家人";break;case 3:s="物业";break}return t("span",s)}},{title:"操作人",minWidth:100,render:(t,e)=>3===e.row.operate_by?t("a",{on:{click:()=>{this.$router.push("/oa/hr/colleague/detail/"+e.row.property_company_user_id)}}},e.row.property_company_user_real_name):this.userInfo.access.includes(C.a.YZDA)?t("a",{on:{click:()=>{this.$router.push("/basic/owner/detail/"+e.row.ejyy_wechat_mp_user_id)}}},e.row.ejyy_wechat_mp_user_real_name):t("span",e.row.ejyy_wechat_mp_user_real_name)},{title:"操作时间",minWidth:180,render:(t,e)=>t("span",v()(e.row.created_at).format("YYYY-MM-DD HH:mm:ss"))}]}},mounted(){this.postInfo.default_community_id&&this.getDetail()},methods:{getDetail(){const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id};b["i"].post("/car/detail",t).then(t=>{this.fetching=!1,this.detail=t.data}).catch(()=>this.fetching=!1)},submit(){m["a"].confirm({title:"请确认",content:`是否要「${this.detail.info.status?"解绑车辆":"恢复绑定"}」${this.detail.info.car_number}`,onOk:()=>{this.submiting=!0;const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id,building_id:this.detail.info.building_id},e=this.detail.info.status?0:1,s=this.detail.info.status?"/car/unbinding":"/car/binding";b["i"].post(s,t).then(t=>{this.submiting=!1,this.detail.info.status=e,this.detail.info.sync=0,this.detail.operateList.unshift({status:e,operate_by:3,created_at:t.data.created_at,property_company_user_id:this.userInfo.id,property_company_user_real_name:this.userInfo.real_name}),p["a"].success("操作成功")}).catch(()=>this.submiting=!1)}})},confirmSync(){m["a"].confirm({title:"请确认",content:`是否已经将「${this.detail.info.car_number}」的信息同步到小区中控系统？`,onOk:()=>{const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id,building_id:this.detail.info.building_id};b["i"].post("/car/sync",t).then(()=>{this.detail.info.sync=1,p["a"].success("确认同步状态成功")}).catch(()=>{})}})}},computed:{...Object(_["c"])({postInfo:"common/postInfo",userInfo:"common/userInfo"}),num(){return b["f"].num("P",this.detail.info.created_at,this.detail.info.id)},building(){return b["b"].text(this.detail.info,!0)},community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},watch:{"postInfo.default_community_id"(){this.getDetail()}},components:{Card:h["a"],Spin:u["a"],Header:f["k"],Row:d["a"],Col:c["a"],Tag:n["a"],Button:r["a"],Table:l["a"],Icon:o["a"],WaterMark:f["s"]}},w=k,x=s("e607"),I=Object(x["a"])(w,i,a,!1,null,null,null);e["default"]=I.exports}}]);