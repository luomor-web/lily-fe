(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27764468"],{"186d":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t._self._c;return s("WaterMark",{staticClass:"contract-detail"},[s("Header",{attrs:{back:""}}),s("Card",{attrs:{"dis-hover":"",bordered:!1,title:"合同信息"}},[s("span",{attrs:{slot:"extra"},slot:"extra"},[t.detail.info.created_user_id===t.userInfo.id&&t.detail.info.finish_time+6048e5>t.now?s("a",{on:{click:t.goUpdate}},[s("Icon",{attrs:{type:"ios-create-outline"}}),t._v(" 修改合同 ")],1):t._e()]),s("Row",{staticClass:"detail-row"},[s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同编号")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.num))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("小区名称")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.community_name))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同名称")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.title))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同类别")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.category))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("甲方")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.first_party))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("甲方联系人")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.first_party_linkman))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("甲方联系电话")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.first_party_phone))])]),t.detail.info.second_party_user_id?t._e():s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v(" 乙方 ")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.second_party))])]),t.detail.info.second_party_user_id?t._e():s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v(" 乙方联系人 ")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.second_party_linkman))])]),t.detail.info.second_party_user_id?t._e():s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v(" 乙方联系电话 ")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.second_party_phone))])]),t.detail.info.second_party_user_id?s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v(" 乙方业主 ")]),s("div",{staticClass:"detail-content"},[t.userInfo.access.includes(t.ROLES.YZDA)?s("router-link",{attrs:{to:"/basic/owner/detail/"+t.detail.info.second_party_user_id}},[t._v(" "+t._s(t.detail.info.second_party_user_real_name)+" ")]):s("span",[t._v(t._s(t.detail.info.second_party_user_real_name))])],1)]):t._e(),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同金额")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.contract_fee))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同开始时间")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.begin_time,!1)))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同结束时间")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.finish_time,!1)))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("合同创建时间")]),s("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.created_at)))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v(" 创建人 ")]),s("div",{staticClass:"detail-content"},[s("router-link",{attrs:{to:"/oa/hr/colleague/detail/"+t.detail.info.created_user_id}},[t._v(" "+t._s(t.detail.info.created_user_real_name)+" ")])],1)])],1)],1),s("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"合同项目"}},t._l(t.detail.items,(function(a,i){return s("div",{key:a.id,staticClass:"item"},[s("Row",{staticClass:"detail-row"},[s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("项目"+t._s(i+1)+"名称")]),s("div",{staticClass:"detail-content"},[t._v(t._s(a.title))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("项目"+t._s(i+1)+"备注")]),s("div",{staticClass:"detail-content"},[t._v(t._s(a.description?a.description:"-"))])]),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("项目"+t._s(i+1)+"金额")]),s("div",{staticClass:"detail-content"},[t._v(t._s(a.fee))])]),a.building_id?s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("项目"+t._s(i+1)+"关联房产")]),s("div",{staticClass:"detail-content"},[t.userInfo.access.includes(t.ROLES.FCDA)?s("router-link",{attrs:{to:"/basic/building/detail/"+a.building_id}},[t._v(" "+t._s(t._f("building")(a))+" ")]):s("span",[t._v(t._s(t._f("building")(a)))])],1)]):t._e(),s("Col",{attrs:{lg:8,sm:12,xs:24}},[s("span",{staticClass:"detail-label"},[t._v("项目"+t._s(i+1)+"附件")]),s("div",{staticClass:"detail-content"},[a.attachment_url?s("a",{attrs:{href:t.ASSET_HOST+a.attachment_url,target:"_blank"}},[t._v(" "+t._s(a.attachment_name)+" ")]):s("span",[t._v("-")])])])],1)],1)})),0),t.fetching?s("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},e=[],l=a("4b1c"),n=a("be5e"),o=a("9484"),d=a("4d77"),_=a("3e79"),c=(a("ed70"),a("7736")),r=a("2af9"),m=a("ed08"),f=a("db49"),C=a("0373"),u=a.n(C),v={name:"OaContractDetail",data(){return{ROLES:u.a,ASSET_HOST:f["a"],now:Date.now(),fetching:!0,detail:{info:{},items:[]}}},mounted(){this.postInfo.default_community_id&&this.getDetail(),this.timer=setInterval(()=>{this.now=Date.now()},1e3)},beforeDestroy(){clearInterval(this.timer)},methods:{getDetail(){const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id};m["i"].post("/contract/detail",t).then(t=>{this.fetching=!1,this.detail=t.data}).catch(()=>this.fetching=!1)},goUpdate(){this.$router.push("/oa/contract/update/"+this.$route.params.id)}},computed:{...Object(c["c"])({postInfo:"common/postInfo",userInfo:"common/userInfo"}),num(){return m["f"].num("CN",this.detail.info.created_at,this.detail.info.id)},community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},watch:{"postInfo.default_community_id"(){this.getDetail()}},components:{Card:_["a"],Spin:d["a"],Header:r["k"],Row:o["a"],Col:n["a"],Icon:l["a"],WaterMark:r["s"]}},p=v,b=(a("bacb"),a("e607")),h=Object(b["a"])(p,i,e,!1,null,null,null);s["default"]=h.exports},"30b7":function(t,s,a){},bacb:function(t,s,a){"use strict";a("30b7")}}]);