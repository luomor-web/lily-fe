(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-498da370"],{c03a:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.fade?e("transition",{attrs:{name:"fade"}},[e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)]):e("div",{class:t.classes,style:t.wraperStyles,on:{click:function(e){return e.stopPropagation(),t.check.apply(null,arguments)}}},[t.showDot?e("span",{class:t.dotClasses,style:t.bgColorStyle}):t._e(),e("span",{class:t.textClasses,style:t.textColorStyle},[t._t("default")],2),t.closable?e("Icon",{class:t.iconClass,attrs:{color:t.lineColor,type:"ios-close"},nativeOn:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()],1)},o=[],l=s("4b1c"),a=s("e4a4");const r="ivu-tag",n=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],c=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"];var d={name:"Tag",components:{Icon:l["a"]},props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(t){return Object(a["m"])(t,["border","dot"])}},name:{type:[String,Number]},fade:{type:Boolean,default:!0},size:{validator(t){return Object(a["m"])(t,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[""+r,`${r}-size-${this.size}`,{[`${r}-${this.color}`]:!!this.color&&Object(a["m"])(this.color,n),[`${r}-${this.type}`]:!!this.type,[r+"-closable"]:this.closable,[r+"-checked"]:this.isChecked}]},wraperStyles(){return Object(a["m"])(this.color,n)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:"dot"!==this.type&&"border"!==this.type&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[r+"-text","border"===this.type&&Object(a["m"])(this.color,n)?`${r}-color-${this.color}`:"","dot"!==this.type&&"border"!==this.type&&"default"!==this.color&&this.isChecked&&c.indexOf(this.color)<0?r+"-color-white":""]},dotClasses(){return r+"-dot-inner"},iconClass(){return"dot"===this.type?"":"border"===this.type?Object(a["m"])(this.color,n)?`${r}-color-${this.color}`:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&"dot"===this.type},lineColor(){return"dot"===this.type?"":"border"===this.type?void 0!==this.color?Object(a["m"])(this.color,n)?"":this.color:"":void 0!==this.color?"default"===this.color?"":"rgb(255, 255, 255)":""},borderColor(){return void 0!==this.color?"default"===this.color?"":this.color:""},dotColor(){return void 0!==this.color?Object(a["m"])(this.color,n)?"":this.color:""},textColorStyle(){return Object(a["m"])(this.color,n)?{}:"dot"!==this.type&&"border"!==this.type?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return Object(a["m"])(this.color,n)?{}:{background:this.dotColor}},defaultTypeColor(){return"dot"!==this.type&&"border"!==this.type&&void 0!==this.color?Object(a["m"])(this.color,n)?"":this.color:""}},methods:{close(t){void 0===this.name?this.$emit("on-close",t):this.$emit("on-close",t,this.name)},check(){if(!this.checkable)return;const t=!this.isChecked;this.isChecked=t,void 0===this.name?this.$emit("on-change",t):this.$emit("on-change",t,this.name)}},watch:{checked(t){this.isChecked=t}}},u=d,h=s("e607"),p=Object(h["a"])(u,i,o,!1,null,null,null),m=p.exports;e["a"]=m},e16f:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("WaterMark",[e("Header",{attrs:{back:""}}),e("Card",{attrs:{"dis-hover":"",bordered:!1,title:"申请信息"}},[e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("申请小区")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.community_name))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 业主姓名 ")]),e("div",{staticClass:"detail-content"},[e("router-link",{attrs:{to:"/basic/owner/detail/"+t.detail.info.wechat_mp_user_id}},[t._v(" "+t._s(t.detail.info.real_name)+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("申请住宅信息")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.house?t.detail.info.house:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("申请车位信息")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.carport?t.detail.info.carport:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 申请仓房信息 ")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.warehouse?t.detail.info.warehouse:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 接受推送 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.subscribed?"success":"default"}},[t._v(" "+t._s(t.detail.info.subscribed?"是":"否")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 认证进度 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.replied?"success":"default"}},[t._v(" "+t._s(t.detail.info.replied?"已处理":"未处理")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("申请时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.created_at)))])])],1)],1),t.detail.info.replied?e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"认证结果"}},[e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 认证结果 ")]),e("div",{staticClass:"detail-content"},[e("Tag",{attrs:{color:t.detail.info.success?"success":"error"}},[t._v(" "+t._s(t.detail.info.success?"成功":"失败")+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("答复内容")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.info.reply_content))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 处理人 ")]),e("div",{staticClass:"detail-content"},[e("router-link",{attrs:{to:"/oa/hr/colleague/detail/"+t.detail.info.replied_by}},[t._v(" "+t._s(t.detail.info.replied_real_name)+" ")])],1)]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("处理时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.info.replied_at)))])])],1)],1):e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"认证处理"}},[e("Form",{ref:"form",attrs:{model:t.form,"label-position":t.mlabelPostion,"label-width":t.mlabelWidth,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormField",{attrs:{title:"认证结果：",prop:"success"}},[e("RadioGroup",{model:{value:t.form.success,callback:function(e){t.$set(t.form,"success",e)},expression:"form.success"}},[e("Radio",{attrs:{label:1}},[t._v("成功")]),e("Radio",{attrs:{label:0}},[t._v("失败")])],1)],1),e("FormField",{attrs:{title:"认证答复：",prop:"reply_content"}},[e("Input",{attrs:{type:"textarea",rows:5,"show-word-limit":"",maxlength:"128",placeholder:"请输入认证结果答复原因，认证失败尽量写明原因"},model:{value:t.form.reply_content,callback:function(e){t.$set(t.form,"reply_content",e)},expression:"form.reply_content"}})],1),t.form.success?e("FormField",{attrs:{title:"业主房产：",prop:"building_ids"}},[e("Select",{attrs:{multiple:"",placeholder:"请选择业主房产",filterable:""},model:{value:t.form.building_ids,callback:function(e){t.$set(t.form,"building_ids",e)},expression:"form.building_ids"}},t._l(t.buildingList,(function(s){return e("Option",{key:s.building_id,attrs:{value:s.building_id}},[t._v(" "+t._s(t._f("building")(s))+" ")])})),1)],1):t._e()],1),e("div",{staticClass:"cw-form-actions"},[e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("提交")])],1)],1),t.detail.info.replied&&t.detail.info.success?e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"认证房产"}},[e("Table",{attrs:{data:t.detail.buildings,columns:t.buildings}})],1):t._e(),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},o=[],l=s("2af6"),a=s("8100"),r=s("2cce"),n=s("e7c9"),c=s("88bd"),d=s("13ab"),u=s("fee1"),h=s("545e"),p=s("be5e"),m=s("9484"),f=s("4d77"),_=s("3e79"),b=s("8c99"),y=s("c03a"),g=(s("ed70"),s("7736")),C=s("2af9"),v=s("ed08"),k=s("e49c"),w=s("0373"),x=s.n(w),I={name:"BasicOwerApplyDetail",data(){return{fetching:!0,detail:{info:{},buildings:[]},form:{success:0,reply_content:"",building_ids:[]},rules:{success:[{required:!0,message:"请选择认证结果"}],reply_content:[{required:!0,message:"请输入认证答复内容"},{max:128,message:"认证答复不能超过128个字"}],building_ids:[{required:!0,type:"array",message:"请选择业主所有房产"}]},buildingList:[],submiting:!1,buildings:[{title:"编号",minWidth:120,render:(t,e)=>t("span",v["f"].num("B",e.row.created_at,e.row.building_id))},{title:"详细",minWidth:120,render:(t,e)=>this.userInfo.access.includes(x.a.FCDA)?t("a",{on:{click:()=>this.$router.push("/building/detail/"+e.row.building_id)}},v["b"].text(e.row)):t("span",v["b"].text(e.row))},{title:"建筑面积(㎡)",minWidth:120,key:"construction_area"},{title:"首次认证类型",minWidth:60,render:(t,e)=>{let s,i;return 1===e.row.authenticated_type?(s="volcano",i="实名信息自行关联"):2===e.row.authenticated_type?(s="orange",i="物业公司现场认证"):(s="red",i="家人APP认证关联"),t(y["a"],{props:{color:s}},i)}},{title:"状态",minWidth:80,render:(t,e)=>t(y["a"],{props:{color:e.row.status?"green":"purple"}},e.row.status?"绑定中":"已解绑")}]}},mixins:[k["a"]],mounted(){this.postInfo.default_community_id&&this.getDetail()},methods:{getDetail(){const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id};v["i"].post("/owner/apply_detail",t).then(t=>{this.detail=t.data,t.data.info.replied?this.fetching=!1:v["i"]({url:"/option/building",data:{community_id:this.postInfo.default_community_id},method:"post"}).then(t=>{this.buildingList=t.data.list,this.fetching=!1}).catch(()=>this.fetching=!1)}).catch(()=>this.fetching=!1)},submit(){this.$refs.form.validate(t=>{t&&(this.submiting=!0,v["i"]({url:"/owner/apply_reply",data:{id:this.$route.params.id,community_id:this.postInfo.default_community_id,...this.form},method:"post"}).then(t=>{b["a"].success("认证成功"),this.detail={info:{...this.detail.info,replied:1,replied_at:t.data.replied_at,replied_by:this.userInfo.id,replied_real_name:this.userInfo.real_name,reply_content:this.form.reply_content,success:this.form.success},buildings:t.data.buildings},this.submiting=!1}).catch(()=>this.submiting=!1))})}},computed:{...Object(g["c"])({postInfo:"common/postInfo",userInfo:"common/userInfo"}),community_name(){if(!this.postInfo.default_community_id)return"";const t=this.postInfo.community_list.findIndex(t=>t.community_id===this.postInfo.default_community_id);return this.postInfo.community_list[t].name}},watch:{"postInfo.default_community_id"(){this.getDetail()}},components:{Card:_["a"],Spin:f["a"],Header:C["k"],Row:m["a"],Col:p["a"],Tag:y["a"],Form:h["a"],Select:u["a"],Option:d["a"],Button:c["a"],Input:n["a"],RadioGroup:r["a"],Radio:a["a"],FormField:C["j"],Table:l["a"],WaterMark:C["s"]}},O=I,$=s("e607"),S=Object($["a"])(O,i,o,!1,null,null,null);e["default"]=S.exports}}]);