(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4c46"],{"089a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",[e("Header",{attrs:{back:""}},[e("span",{attrs:{slot:"description"},slot:"description"},[t._v(" 公司整体设置，请谨慎操作，如有疑问请发信至 "),e("a",{attrs:{href:"mailto:contact@luomor.com"}},[t._v("技术支持")]),t._v(" 咨询。 ")])]),e("Card",{attrs:{"dis-hover":"",bordered:!1,title:"小区信息"}},[e("span",{attrs:{slot:"extra"},slot:"extra"},[e("a",{on:{click:t.goUpdate}},[e("Icon",{attrs:{type:"ios-create-outline"}}),t._v(" 修改信息 ")],1)]),e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("小区名称")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.communityInfo.name))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("客服电话")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.communityInfo.phone))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 小区地址 ")]),e("div",{staticClass:"detail-content"},[t._v(" "+t._s(t.detail.communityInfo.province)+t._s(t.detail.communityInfo.city)+t._s(t.detail.communityInfo.district)+" ")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("创建时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.communityInfo.created_at)))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 小图封面图 ")]),e("div",{staticClass:"detail-content"},[!t.fetching&&t.detail.communityInfo.banner?e("Images",{attrs:{imgs:[t.detail.communityInfo.banner]}}):e("span",[t._v("暂无上传")])],1)])],1)],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"创建人信息"}},[e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 创建人姓名 ")]),e("div",{staticClass:"detail-content"},[t._v(" "+t._s(t.detail.creatorInfo.real_name?t.detail.creatorInfo.real_name:"-")+" ")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 创建人电话 ")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.creatorInfo.phone?t.detail.creatorInfo.phone:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("创建时间")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t._f("mom_format")(t.detail.creatorInfo.created_at)))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 部门 ")]),e("div",{staticClass:"detail-content"},[t._v(" "+t._s(t.detail.creatorInfo.department?t.detail.creatorInfo.department:"-")+" ")])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("工作职位")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.creatorInfo.job?t.detail.creatorInfo.job:"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v(" 创建人头像 ")]),e("div",{staticClass:"detail-content"},[t.fetching?t._e():e("Images",{attrs:{imgs:[t.detail.creatorInfo.avatar_url]}})],1)])],1)],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"小区支持功能"}},[e("Row",{staticClass:"detail-row"},[e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("NFC门禁")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.setting.access_nfc?"支持":"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("二维码门禁")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.setting.access_qrcode?"支持":"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("远程开门")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.setting.access_remote?"支持":"-"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("装修保证金")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.setting.fitment_pledge?"需要":"不需要"))])]),e("Col",{attrs:{lg:8,sm:12,xs:24}},[e("span",{staticClass:"detail-label"},[t._v("车位绑定车辆数目")]),e("div",{staticClass:"detail-content"},[t._v(t._s(t.detail.setting.carport_max_car))])])],1)],1),e("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"便民信息"}},[e("a",{attrs:{slot:"extra"},on:{click:t.appendConvenient},slot:"extra"},[e("Icon",{attrs:{type:"ios-add-circle-outline"}}),t._v(" 添加 ")],1),e("Table",{attrs:{stripe:"",columns:t.columns,data:t.detail.convenientList}})],1),e("Modal",{attrs:{title:t.editIndex>-1?"更新便民信息":"创建便民信息"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("Form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("FormItem",{attrs:{prop:"title",label:"机构名称："}},[e("Input",{attrs:{placeholder:"请输入机构名称"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("FormItem",{attrs:{prop:"location",label:"详细地址："}},[e("Input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}})],1),e("FormItem",{attrs:{prop:"phone",label:"联系电话："}},[e("Input",{attrs:{type:"number",placeholder:"请输入联系电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:t.hideModal}},[t._v("取消")]),e("Button",{attrs:{type:"primary",loading:t.submiting},on:{click:t.submit}},[t._v("确认")])],1)],1),t.fetching?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[],l=a("88bd"),o=a("e7c9"),n=a("5ca3"),r=a("545e"),d=a("4b1c"),c=a("2af6"),m=a("be5e"),p=a("9484"),v=a("4d77"),h=a("3e79"),u=a("7c0d"),_=a("8c99"),f=(a("ed70"),a("2af9")),C=a("ed08"),b={name:"SettingCommunityDetail",data(){return{now:Date.now(),fetching:!0,detail:{communityInfo:{},creatorInfo:{},setting:{}},columns:[{title:"机构名称",minWidth:120,key:"title"},{title:"地址",minWidth:120,key:"location"},{title:"联系电话",minWidth:120,key:"phone"},{title:"操作",key:"id",minWidth:80,render:(t,e)=>t("span",[t("a",{on:{click:()=>this.update(e)}},"修改"),t("a",{on:{click:()=>this.delete(e)}},"删除")])}],visible:!1,submiting:!1,editIndex:-1,form:{title:"",location:"",phone:""},rules:{title:[{required:!0,message:"请输入机构名称"},{max:30,message:"机构名称最多输入40个字"}],location:[{required:!0,message:"请输入详细地址"},{max:128,message:"详细地址最多输入128个字"}],phone:[{required:!0,message:"请输入联系电话"},{pattern:/^\d{11}$/,message:"请输入正确的电话号码"}]},lsubmiting:!1}},mounted(){C["i"].get("/community_manage/detail/"+this.$route.params.id).then(t=>{this.fetching=!1,this.detail=t.data})},methods:{appendConvenient(){this.visible=!0,this.form={title:"",location:"",phone:""},this.editIndex=-1,this.$refs.form.resetFields()},hideModal(){this.visible=!1},submit(){this.$refs.form.validate(t=>{t&&(this.submiting=!0,this.editIndex>-1?C["i"].post("/convenient/update",{...this.form,community_id:this.$route.params.id,id:this.detail.convenientList[this.editIndex].id}).then(()=>{const t=[].concat(this.detail.convenientList);t[this.editIndex]={...t[this.editIndex],...this.form},this.detail.convenientList=t,this.submiting=!1,_["a"].success("更新便民信息成功"),this.hideModal()}).catch(()=>this.submiting=!1):C["i"].post("/convenient/create",{...this.form,community_id:this.$route.params.id}).then(t=>{this.detail.convenientList.unshift({...this.form,id:t.data.id}),this.submiting=!1,_["a"].success("创建便民信息成功"),this.hideModal()}).catch(()=>this.submiting=!1))})},update(t){this.visible=!0,this.form={title:t.row.title,location:t.row.location,phone:t.row.phone},this.editIndex=t.index,this.$refs.form.resetFields()},delete(t){u["a"].confirm({title:"请确认",content:`确认要删除「${t.row.title}」的信息吗？`,onOk:()=>{C["i"].post("/convenient/delete",{id:t.row.id,community_id:this.$route.params.id}).then(()=>{this.detail.convenientList.splice(t.index,1),_["a"].success("删除便民信息成功")}).catch(()=>{})}})},goUpdate(){this.$router.push("/setting/community/update/"+this.$route.params.id)}},components:{Card:h["a"],Spin:v["a"],Header:f["k"],Row:p["a"],Col:m["a"],Images:f["m"],Table:c["a"],Icon:d["a"],Form:r["a"],FormItem:n["a"],Modal:u["a"],Input:o["a"],Button:l["a"]}},g=b,I=a("e607"),x=Object(I["a"])(g,s,i,!1,null,null,null);e["default"]=x.exports}}]);