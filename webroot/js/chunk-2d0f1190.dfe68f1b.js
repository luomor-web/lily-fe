(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f1190"],{"9ed2":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("section",[t("SimpleHeader",[t("span",{attrs:{slot:"title"},slot:"title"},[e._v("系统初始化信息")])]),e.success?t("div",{staticClass:"container"},[t("Result",{attrs:{title:"系统初始化成功"}},[t("div",{attrs:{slot:"extra"},slot:"extra"},[t("p",[e._v("感谢您的支持和信赖。")])]),t("div",{attrs:{slot:"actions"},slot:"actions"},[t("Button",{attrs:{type:"success"},on:{click:e.goLogin}},[e._v("立即登录")])],1)])],1):t("div",{staticClass:"container"},[t("UserInitProfile",{ref:"profile"}),t("UserInitCommunity",{ref:"community"}),t("div",{staticClass:"cw-form-actions"},[t("Button",{attrs:{type:"primary",loading:e.submiting},on:{click:e.submit}},[e._v("立即初始化")])],1)],1),t("Copyright")],1)},a=[],o=r("88bd"),l=r("2af9"),i=r("ed08"),n=function(){var e=this,t=e._self._c;return t("Card",{attrs:{"dis-hover":"",bordered:!1,title:"个人基本资料"}},[t("Form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-position":e.mlabelPostion,"label-width":e.mlabelWidth},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormField",{attrs:{prop:"real_name",title:"姓名：",width:"200"}},[t("Input",{attrs:{placeholder:"请输入您的真实姓名"},model:{value:e.form.real_name,callback:function(t){e.$set(e.form,"real_name",t)},expression:"form.real_name"}})],1),t("FormField",{attrs:{title:"身份证号码：",prop:"idcard",width:"300"}},[t("Input",{attrs:{placeholder:"请输入您的身份证号码"},model:{value:e.form.idcard,callback:function(t){e.$set(e.form,"idcard",t)},expression:"form.idcard"}})],1),t("FormField",{attrs:{prop:"avatar_url",title:"头像：",label:"请上传200*200以上尺寸图片"}},[t("AvatarCrop",{attrs:{dir:"avatar",circle:""},model:{value:e.form.avatar_url,callback:function(t){e.$set(e.form,"avatar_url",t)},expression:"form.avatar_url"}})],1),t("FormField",{attrs:{title:"手机号码：",prop:"phone",width:"200"}},[t("Input",{attrs:{placeholder:"请输入您的手机号码"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("FormField",{attrs:{title:"登录账号：",prop:"account",width:"300"}},[t("Input",{attrs:{placeholder:"请输入账号"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),t("FormField",{attrs:{title:"登录密码：",prop:"password",width:"300"}},[t("Input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("FormField",{attrs:{title:"确认登录密码：",prop:"password2",width:"300"}},[t("Input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.form.password2,callback:function(t){e.$set(e.form,"password2",t)},expression:"form.password2"}})],1)],1)],1)},c=[],m=r("e7c9"),d=r("545e"),p=r("3e79"),u=(r("00e5"),r("e49c")),f={name:"UserInitProfile",data(){return{labelWidth:160,form:{real_name:"",idcard:void 0,avatar_url:void 0,phone:void 0,account:void 0,password:void 0,password2:void 0},rules:{real_name:[{required:!0,message:"请输入您的真实姓名"},{max:8,message:"姓名不能超过8个字符"}],idcard:[{required:!0,message:"请输入您的身份证号码"},{pattern:/^\d{17}\d|x$/i,message:"请输入正确的身份证号码"}],avatar_url:[{required:!0,pattern:/^\/avatar\/[a-z0-9]{32}\.(jpg|jpeg|png)$/,message:"请上传您的头像，建议使用实拍照片"}],phone:[{required:!0,message:"请输入您的手机号码"},{pattern:/^\d{11}$/,message:"请输入正确的手机号码"}],account:[{required:!0,message:"请输入账号"},{min:4,message:"账号长度应大于4个字符"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度应大于6个字符"}],password2:[{required:!0,message:"请输入确认密码"},{min:6,message:"密码长度应大于6个字符"},{validator:(e,t,r)=>{t&&this.form.password&&t===this.form.password?r():r(new Error("两次密码输入不一致"))},message:"两次密码输入不一致"}]}}},mixins:[u["a"]],methods:{validate(){return new Promise(e=>{this.$refs.form.validate(t=>{t&&e(this.form)})})}},components:{Card:p["a"],AvatarCrop:l["b"],Form:d["a"],FormField:l["j"],Input:m["a"]}},v=f,_=r("e607"),h=Object(_["a"])(v,n,c,!1,null,null,null),b=h.exports,g=function(){var e=this,t=e._self._c;return t("Card",{staticClass:"mt-16",attrs:{"dis-hover":"",bordered:!1,title:"初始化小区信息"}},[t("Form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-position":e.mlabelPostion,"label-width":e.mlabelWidth,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormField",{attrs:{title:"小区名称：",prop:"name",width:"300"}},[t("Input",{attrs:{placeholder:"请输入小区名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("FormField",{attrs:{title:"小区所在地：",prop:"address"}},[t("AreaSelect",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),t("FormField",{attrs:{title:"客服电话：",prop:"service_phone",width:"200"}},[t("Input",{attrs:{placeholder:"请输入客服电话"},model:{value:e.form.service_phone,callback:function(t){e.$set(e.form,"service_phone",t)},expression:"form.service_phone"}})],1),t("FormField",{attrs:{title:"小区照片：",prop:"banner",label:"请上传900*506尺寸图片，用于业主端App展示"}},[t("ImageUpload",{attrs:{dir:"community_banner",width:900,height:506},model:{value:e.form.banner,callback:function(t){e.$set(e.form,"banner",t)},expression:"form.banner"}})],1),t("FormField",{attrs:{prop:"access_nfc",title:"NFC门禁："}},[t("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:e.form.access_nfc,callback:function(t){e.$set(e.form,"access_nfc",t)},expression:"form.access_nfc"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("关")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("开")])])],1),t("FormField",{attrs:{prop:"access_qrcode",title:"二维码门禁："}},[t("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:e.form.access_qrcode,callback:function(t){e.$set(e.form,"access_qrcode",t)},expression:"form.access_qrcode"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("关")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("开")])])],1),t("FormField",{attrs:{prop:"access_remote",title:"远程开门："}},[t("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:e.form.access_remote,callback:function(t){e.$set(e.form,"access_remote",t)},expression:"form.access_remote"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("关")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("开")])])],1),t("FormField",{attrs:{prop:"fitment_pledge",title:"装修保证金："}},[t("OSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:e.form.fitment_pledge,callback:function(t){e.$set(e.form,"fitment_pledge",t)},expression:"form.fitment_pledge"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("关")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("开")])])],1),t("FormField",{attrs:{prop:"carport_max_car",title:"车位绑定车辆数目：",width:"120"}},[t("Input",{attrs:{type:"number"},model:{value:e.form.carport_max_car,callback:function(t){e.$set(e.form,"carport_max_car",t)},expression:"form.carport_max_car"}})],1)],1)],1)},w=[],F=r("37a2"),x={name:"UserInitCommunity",data(){return{labelWidth:160,form:{name:"",address:[],service_phone:"",banner:"",access_nfc:0,access_qrcode:0,access_remote:0,fitment_pledge:0,carport_max_car:1},rules:{name:[{required:!0,message:"请输入小区名称"},{max:12,message:"小区名称不能超过12个字"}],address:[{required:!0,type:"array",len:3,message:"请选择小区所在地"}],service_phone:[{required:!0,message:"请输入小区客户电话"},{pattern:/^\d{11}$/,message:"请输入正确的电话号码"}],banner:[{required:!0,message:"请上传小区照片"}],access_nfc:[{required:!0,type:"number"}],access_qrcode:[{required:!0,type:"number"}],access_remote:[{required:!0,type:"number"}],fitment_pledge:[{required:!0,type:"number"}],carport_max_car:[{required:!0,pattern:/^\d+$/,message:"请输入正确的车位可绑定车辆的数目"}]}}},methods:{validate(){return new Promise(e=>{this.$refs.form.validate(t=>{t&&e(this.form)})})}},mixins:[u["a"]],components:{FormField:l["j"],ImageUpload:l["l"],Card:p["a"],Form:d["a"],AreaSelect:l["a"],Input:m["a"],OSwitch:F["a"]}},$=x,q=Object(_["a"])($,g,w,!1,null,null,null),k=q.exports,y={name:"UserInit",data(){return{submiting:!1,success:!1}},methods:{submit(){Promise.all([this.$refs.profile.validate(),this.$refs.community.validate()]).then(([e,t])=>{const r={...e,...t,province:t.address[0],city:t.address[1],district:t.address[2]};delete r.address,this.submiting=!0,i["i"].post("/init/run",r).then(()=>{this.submiting=!1,this.success=!0}).catch(()=>this.submiting=!1)})},goLogin(){this.$router.replace("/user/login")}},components:{Button:o["a"],Copyright:l["d"],Result:l["q"],SimpleHeader:l["r"],UserInitProfile:b,UserInitCommunity:k}},I=y,C=Object(_["a"])(I,s,a,!1,null,null,null);t["default"]=C.exports}}]);