(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddf8f"],{8452:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t._self._c;return i("section",[i("Header",{attrs:{back:""}}),i("Editor",{attrs:{onSubmit:t.submit,update:"",detail:t.detail}}),t.fetching?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},n=[],o=a("4d77"),d=a("8c99"),s=(a("ed70"),a("7736")),r=a("2af9"),c=a("27b7"),_=a("ed08"),p={name:"OaContractUpdate",components:{Header:r["k"],Editor:c["a"],Message:d["a"],Spin:o["a"]},data(){return{fetching:!0,detail:{}}},mounted(){this.postInfo.default_community_id&&this.getDetail()},methods:{getDetail(){const t={id:this.$route.params.id,community_id:this.postInfo.default_community_id};_["i"].post("/contract/detail",t).then(t=>{this.fetching=!1,this.detail={title:t.data.info.title,category_id:t.data.info.category_id,first_party:t.data.info.first_party,first_party_linkman:t.data.info.first_party_linkman,first_party_phone:t.data.info.first_party_phone,second_party:t.data.info.second_party,second_party_linkman:t.data.info.second_party_linkman,second_party_phone:t.data.info.second_party_phone,owner_phone:t.data.info.owner_phone,second_party_wechat_mp_user_id:t.data.info.second_party_user_id,begin_time:new Date(t.data.info.begin_time),finish_time:new Date(t.data.info.finish_time),contract_fee:t.data.info.contract_fee,is_owner:!!t.data.info.owner_phone,items:t.data.items.map(t=>({id:t.id,title:t.title,descritpion:t.descritpion?t.descritpion:void 0,building_id:t.building_id?t.building_id:void 0,attachment_url:t.attachment_url?t.attachment_url:void 0,attachment_name:t.attachment_name?t.attachment_name:void 0,fee:t.fee}))}})},submit(t){return new Promise((i,a)=>{_["i"].post("/contract/update",{...t,id:this.$route.params.id,community_id:this.postInfo.default_community_id}).then(()=>{d["a"].success("修改合同成功"),this.$router.push("/oa/contract/detail/"+this.$route.params.id),i()}).catch(()=>a())})}},computed:{...Object(s["c"])({postInfo:"common/postInfo"})},watch:{"postInfo.default_community_id"(){this.getDetail()}}},f=p,m=a("e607"),u=Object(m["a"])(f,e,n,!1,null,null,null);i["default"]=u.exports}}]);